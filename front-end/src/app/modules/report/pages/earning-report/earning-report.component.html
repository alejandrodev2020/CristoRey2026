<div class="base-content">
  <div class="contenido">
    <!---------------------------------------------------------------------------------------------------------------------------->
    <div class="flex items-center justify-between dark:bg-gray-700">
      <div>
        <div class="w-full mt-4">
          <div class="text-2xl font-semibold tracking-tight leading-6">Gesti√≥n Reportes Ganancias</div>
          <div class="font-medium tracking-tight text-secondary">Modulo de reportes Ganancias</div>
        </div>
      </div>
      <div>
        <div (click)="downloadPDFTermic()"
          class=" btn-export btn-pdf flex items-center justify-center m-1  p-1 pl-2 pr-2">
          Exportar
          <svg height="24px" width="24px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" fill="#000000">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
              <path style="fill:#E2E5E7;"
                d="M128,0c-17.6,0-32,14.4-32,32v448c0,17.6,14.4,32,32,32h320c17.6,0,32-14.4,32-32V128L352,0H128z">
              </path>
              <path style="fill:#B0B7BD;" d="M384,128h96L352,0v96C352,113.6,366.4,128,384,128z"></path>
              <polygon style="fill:#CAD1D8;" points="480,224 384,128 480,128 "></polygon>
              <path style="fill:#F15642;"
                d="M416,416c0,8.8-7.2,16-16,16H48c-8.8,0-16-7.2-16-16V256c0-8.8,7.2-16,16-16h352c8.8,0,16,7.2,16,16 V416z">
              </path>
              <g>
                <path style="fill:#FFFFFF;"
                  d="M101.744,303.152c0-4.224,3.328-8.832,8.688-8.832h29.552c16.64,0,31.616,11.136,31.616,32.48 c0,20.224-14.976,31.488-31.616,31.488h-21.36v16.896c0,5.632-3.584,8.816-8.192,8.816c-4.224,0-8.688-3.184-8.688-8.816V303.152z M118.624,310.432v31.872h21.36c8.576,0,15.36-7.568,15.36-15.504c0-8.944-6.784-16.368-15.36-16.368H118.624z">
                </path>
                <path style="fill:#FFFFFF;"
                  d="M196.656,384c-4.224,0-8.832-2.304-8.832-7.92v-72.672c0-4.592,4.608-7.936,8.832-7.936h29.296 c58.464,0,57.184,88.528,1.152,88.528H196.656z M204.72,311.088V368.4h21.232c34.544,0,36.08-57.312,0-57.312H204.72z">
                </path>
                <path style="fill:#FFFFFF;"
                  d="M303.872,312.112v20.336h32.624c4.608,0,9.216,4.608,9.216,9.072c0,4.224-4.608,7.68-9.216,7.68 h-32.624v26.864c0,4.48-3.184,7.92-7.664,7.92c-5.632,0-9.072-3.44-9.072-7.92v-72.672c0-4.592,3.456-7.936,9.072-7.936h44.912 c5.632,0,8.96,3.344,8.96,7.936c0,4.096-3.328,8.704-8.96,8.704h-37.248V312.112z">
                </path>
              </g>
              <path style="fill:#CAD1D8;" d="M400,432H96v16h304c8.8,0,16-7.2,16-16v-16C416,424.8,408.8,432,400,432z">
              </path>
            </g>
          </svg>
        </div>
      </div>
    </div>
    <!---------------------------------------------------------------------------------------------------------------------------->
    <br>
    <br>

    <div class="flex items-center justify-between mt-2" style="color:#a2c747 !important">
      <button (click)="toggleFilter()" class="flex items-center">
        <mat-icon style="color:#a2c747 !important">{{ isFilterVisible ? 'visibility_off' : 'visibility' }}</mat-icon>
        <span style="color:#a2c747 !important" class="ml-2 font-bold text-black">{{ isFilterVisible ? 'Ocultar filtros'
          :
          'Mostrar filtros' }}</span>
      </button>
    </div>
    <!-------------------------------------------->
    <div *ngIf="isFilterVisible">
      <!-- <sale-filter-report (emitQuery)="senfilter($event)"></sale-filter-report> -->
      <earning-item-detail-report (emitQuery)="senfilter($event)"></earning-item-detail-report>
    </div>




    <!---------------------------------------------------------------------------------------------------------------------------->
    <div style="border-radius: 6px;"
      class="mt-2 mb-2 py-0.4 px-1 pt-3 pb-3  pl-2  text-sm text-start font-semibold text-green-800 bg-green-100 dark:text-green-50 dark:bg-green-500">
      <div class="grid grid-cols-1 sm:grid-cols-12 gap-6 w-full min-w-0">
        <div class="sm:col-span-4 lg:col-span-4">
          <div class="flex flex-col flex-auto">
            <div class="text-3x2 font-extrabold tracking-tight leading-none">Ganancia Total:</div>
            <div class="text-3x1 font-extrabold tracking-tight leading-none" style="font-size:30px"> Bs.
              {{amountTotalEarning | number:'1.0-2'}}</div>
          </div>
        </div>
        <div class="sm:col-span-4 lg:col-span-4">
          <div class="flex flex-col flex-auto">
            <div class="text-3x2 font-extrabold tracking-tight leading-none">Filtros Aplicados:</div>
            <div class="text-3x2 font-extrabold tracking-tight leading-none">Fecha : {{rangeDateLabel}}</div>
          </div>
        </div>
        <div class="sm:col-span-4 lg:col-span-4">
          <div class="flex flex-col flex-auto">
            <div class="text-3x2 font-extrabold tracking-tight leading-none">Vendedor: {{userNameSelect}}</div>
            <div class="text-3x2 font-extrabold tracking-tight leading-none">Cliente: {{clientNameSelect}}</div>
          </div>
        </div>
      </div>
    </div>
    <!---------------------------------------------------------------------------------------------------------------------------->
    <div class="mat-elevation-z0 table-responsive">
      <table mat-table [dataSource]="dataSource" class="table">

        <ng-container matColumnDef="order">
          <th mat-header-cell *matHeaderCellDef class="center-text"> Cod </th>
          <td mat-cell *matCellDef="let element" class="center-text"> {{element?.id}} </td>
        </ng-container>

        <ng-container matColumnDef="warehouse">
          <th mat-header-cell *matHeaderCellDef class="center-text"> Monto Ganancia </th>
          <td mat-cell *matCellDef="let element" class="center-text">
            <strong *ngIf="element?.amountTotalEarning < 0" style="color:#c0392b">
              {{element?.amountTotalEarning | number:'1.0-2' }} Bs
            </strong>
            <strong *ngIf="element?.amountTotalEarning > 0" style="color:#229954">
              {{element?.amountTotalEarning | number:'1.0-2' }} Bs
            </strong>
            <strong *ngIf="element?.amountTotalEarning === 0" style="color:#1f618d">
              {{element?.amountTotalEarning | number:'1.0-2' }} Bs
            </strong>
          </td>
        </ng-container>


        <ng-container matColumnDef="saleId">
          <th mat-header-cell *matHeaderCellDef class="center-text"> Cod. Venta </th>
          <td mat-cell *matCellDef="let element" class="center-text">
            <div class="flex" style="justify-content: center; justify-items: center;">
              <label class="mr-1"> {{element?.sale?.id}} </label>
              <mat-icon style="color:#A2C747" (click)="overView(element)" class="ml-1 mr-2">visibility</mat-icon>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="saleTotal">
          <th mat-header-cell *matHeaderCellDef class="center-text">Total Venta</th>
          <td mat-cell *matCellDef="let element" class="center-text" style="justify-content: center;">
            {{element?.sale?.amountTotal | number:'1.0-2'}} Bs </td>
        </ng-container>

        <ng-container matColumnDef="saleDate">
          <th mat-header-cell *matHeaderCellDef class="center-text"> Fecha Ganancia</th>
          <td mat-cell *matCellDef="let element" class="center-text" style="justify-content: center;">
            {{element?.sale?.saleDate | dateFormatHours}} </td>
        </ng-container>

        <ng-container matColumnDef="client">
          <th mat-header-cell *matHeaderCellDef class="center-text"> Cliente</th>
          <td mat-cell *matCellDef="let element" class="center-text" style="justify-content: center;">
            {{element?.sale?.client?.firstName }} {{element?.sale?.client?.lastName }} </td>
        </ng-container>

        <ng-container matColumnDef="seller">
          <th mat-header-cell *matHeaderCellDef class="center-text"> Vendedor</th>
          <td mat-cell *matCellDef="let element" class="center-text" style="justify-content: center;">
            {{element?.sale?.user?.firstName }} {{element?.sale?.user?.lastName }} </td>
        </ng-container>

        <ng-container matColumnDef="saleType">
          <th mat-header-cell *matHeaderCellDef class="center-text"> Acciones </th>
          <td mat-cell *matCellDef="let element" class="center-text">
            <div style="display: flex; justify-content: center; align-items: Enter;">
              <btn-actions [color]="'secondary'" [label]="' Seguimiento'" [icon]="'dvr'" [withFull]="false"
                [disabled]="false" (buttonClick)="gestionaryEarning(element)">
              </btn-actions>

            </div>


          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <mat-paginator [pageSizeOptions]="listOptionsPage" [length]="totalLength" [pageIndex]="page" [pageSize]="limit"
        showFirstLastButtons (page)="pageEvent($event)" aria-label="Select page of periodic elements">
      </mat-paginator>
    </div>
    <!---------------------------------------------------------------------------------------------------------------------------->
  </div>
</div>