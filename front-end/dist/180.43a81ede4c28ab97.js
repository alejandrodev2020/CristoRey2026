"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[180],{8831:(H,A,s)=>{s.d(A,{e:()=>f});var p=s(2365),g=s(4650),U=s(529);class f extends p.b{constructor(h){super(h)}getlistPatients(h){return this.http.get(`${this.baseUri}api/patient/list?${h}`,this.getHttpOptions())}store(h){return h?.id?this.http.put(`${this.baseUri}api/patient/${h.id}`,h,this.getHttpOptions()):this.http.post(`${this.baseUri}api/patient`,h,this.getHttpOptions())}getById(h){return this.http.get(`${this.baseUri}api/patient/${h}`,this.getHttpOptions())}lowById(h){return this.http.put(`${this.baseUri}api/patient/${h}/low`,this.getHttpOptions())}getListZone(){return this.http.get(`${this.baseUri}api/client/zone/list`,this.getHttpOptions())}getListClinicHistoryById(h,u){return this.http.get(`${this.baseUri}api/patient/${h}/clinical-history${u}`,this.getHttpOptions())}printReport(h,u){return this.http.get(`${this.baseUri}api/patient/report?PatientId=${h}&DoctorId=${u}`,{...this.getHttpOptions(),responseType:"blob"})}updateCita(h,u){return this.http.put(`${this.baseUri}api/patient/clinical-history/${h}/gestionary`,u,this.getHttpOptions())}}f.\u0275fac=function(h){return new(h||f)(g.LFG(U.eN))},f.\u0275prov=g.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},6034:(H,A,s)=>{s.d(A,{$:()=>a});var p=s(529),g=s(7775),U=s(4650);const f={headers:new p.WM({"Access-Control-Allow-Origin":"*",Authorization:"authkey",userid:"1"})};class a{constructor(u){this.http=u,this.baseUri="",this.baseUri=g.N.production?g.N.apiUrlProd:g.N.apiUrlLocal}getAllPettyCash(u){return this.http.get(`${this.baseUri}api/petty-cash/list${u}`,f)}store(u){return u?.id?this.http.put(`${this.baseUri}api/petty-cash/${u.id}`,u):this.http.post(`${this.baseUri}api/petty-cash`,u)}getById(u){return this.http.get(`${this.baseUri}api/petty-cash/`+u)}getBySellerId(u){return this.http.get(`${this.baseUri}api/petty-cash/seller/`+u)}getByWarehouseId(u){return this.http.get(`${this.baseUri}api/petty-cash/warehouse/`+u)}lowById(u){return this.http.put(`${this.baseUri}api/petty-cash/${u}/low`,{})}closePettyCash(u,_){return this.http.put(`${this.baseUri}api/petty-cash/${u}/close`,_)}getMovementsById(u){return this.http.get(`${this.baseUri}api/petty-cash/${u}/movements`)}getReportPettyCashById(u){const _={headers:new p.WM({"Content-Type":"application/json"}),responseType:"blob"};return this.http.get(`${this.baseUri}api/reporting/petty-cash/${u}/movement`,_)}getReportExcelPettyCashById(u){const _={headers:new p.WM({"Content-Type":"application/json"}),responseType:"blob"};return this.http.get(`${this.baseUri}api/reporting/excel/petty-cash/${u}/movement`,_)}saveOperators(u){return this.http.post(`${this.baseUri}api/petty-cash/assistant`,u)}getOperatorsByPettyCashId(u){return this.http.get(`${this.baseUri}api/petty-cash/${u}/assistant`)}}a.\u0275fac=function(u){return new(u||a)(U.LFG(p.eN))},a.\u0275prov=U.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})},6771:(H,A,s)=>{s.d(A,{K:()=>k});var p=s(5412),g=s(5226),U=s.n(g),f=s(7775),a=s(4650),h=s(8831),u=s(4006),_=s(6895),e=s(7392),b=s(4859),x=s(9549),C=s(284),w=s(6709);const y=function(q,T,m){return{"bg-yellow-100 text-yellow-800":q,"bg-green-100 text-green-800":T,"bg-red-100 text-red-800":m}};class k{constructor(T,m,d,R,v){this.dialogRef=T,this.service=m,this.dialog=d,this.fb=v,this.amountTotal=0,this.cita=null,this.logoClient=f.N.logo,this.cita=R,this.saleId=R?.id,this.formCita=this.fb.group({motive:[""],diagnostic:[""],observations:[""],totalCost:[0],wasPaid:[!1]})}ngOnInit(){this.cita&&this.formCita.patchValue({motive:this.cita.motive,diagnostic:this.cita.diagnostic,observations:this.cita.observations,totalCost:this.cita.totalCost,wasPaid:this.cita.wasPaid}),this.saleId>0&&this.setData(this.saleId)}setData(T){}close(){this.dialogRef.close(!1)}updateCita(){this.formCita.invalid||this.service.updateCita(this.cita.id,{motive:this.formCita.value.motive,diagnostic:this.formCita.value.diagnostic,observations:this.formCita.value.observations,totalCost:this.formCita.value.totalCost,wasPaid:this.formCita.value.wasPaid}).subscribe(()=>{U().fire({icon:"success",title:"Cambios guardados",text:"La cita fue actualizada correctamente",showConfirmButton:!1,timer:1500}).then(()=>{this.dialogRef.close(!0)})})}downloadPDFTermic(){this.saleOrder.clientStore=f.N.nameStore,this.saleOrder.codeClient=f.N.codeClient}dowloadTermic(){}dowloadLeeter(){}}k.\u0275fac=function(T){return new(T||k)(a.Y36(p.so),a.Y36(h.e),a.Y36(p.uw),a.Y36(p.WI),a.Y36(u.qu))},k.\u0275cmp=a.Xpm({type:k,selectors:[["app-overview-sale"]],decls:50,vars:9,consts:[["id","contenido",1,"overview-sale","p-0","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"grid","grid-cols-12","border-b"],[1,"col-span-3"],[1,"p-4","flex","flex-col","flex-auto"],[1,"max-w-20",3,"src"],[1,"col-span-6"],[1,"center-item"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"mt-2","flex","items-center","gap-2"],[1,"text-sm","font-semibold"],[1,"px-3","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],[1,"flex","flex-col","flex-auto","m-4","items-end"],["svgIcon","heroicons_outline:x",1,"cursor-pointer",3,"click"],[1,"m-6","grid","grid-cols-12","gap-4",3,"formGroup"],[1,"col-span-12"],["appearance","outline",1,"w-full"],["matInput","","rows","2","formControlName","motive"],["matInput","","rows","2","formControlName","diagnostic"],["matInput","","rows","3","formControlName","observations"],["matInput","","type","number","formControlName","totalCost"],[1,"col-span-6","flex","items-center"],["formControlName","wasPaid"],[1,"col-span-12","flex","justify-end","gap-3","mt-6"],["mat-stroked-button","","color","warn","type","button",3,"click"],["mat-flat-button","","color","primary","type","button",3,"click"]],template:function(T,m){1&T&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a._UZ(4,"img",4),a.qZA()(),a.TgZ(5,"div",5)(6,"div",6)(7,"div")(8,"div",7),a._uU(9),a.qZA(),a.TgZ(10,"div",8)(11,"span",9),a._uU(12,"Estado:"),a.qZA(),a.TgZ(13,"span",10),a._uU(14),a.qZA()()()()(),a.TgZ(15,"div",2)(16,"div",11)(17,"mat-icon",12),a.NdJ("click",function(){return m.close()}),a.qZA()()()(),a.TgZ(18,"form",13)(19,"div",14)(20,"mat-form-field",15)(21,"mat-label"),a._uU(22,"Motivo"),a.qZA(),a.TgZ(23,"textarea",16),a._uU(24,"        "),a.qZA()()(),a.TgZ(25,"div",14)(26,"mat-form-field",15)(27,"mat-label"),a._uU(28,"Diagn\xf3stico"),a.qZA(),a.TgZ(29,"textarea",17),a._uU(30,"        "),a.qZA()()(),a.TgZ(31,"div",14)(32,"mat-form-field",15)(33,"mat-label"),a._uU(34,"Observaciones"),a.qZA(),a.TgZ(35,"textarea",18),a._uU(36,"        "),a.qZA()()(),a.TgZ(37,"div",5)(38,"mat-form-field",15)(39,"mat-label"),a._uU(40,"Total (Bs.)"),a.qZA(),a._UZ(41,"input",19),a.qZA()(),a.TgZ(42,"div",20)(43,"mat-checkbox",21),a._uU(44," \xbfPagado? "),a.qZA()(),a.TgZ(45,"div",22)(46,"button",23),a.NdJ("click",function(){return m.close()}),a._uU(47," Cancelar "),a.qZA(),a.TgZ(48,"button",24),a.NdJ("click",function(){return m.updateCita()}),a._uU(49," Editar "),a.qZA()()()()),2&T&&(a.xp6(4),a.Q6J("src",m.logoClient,a.LSH),a.xp6(5),a.hij(" Gesti\xf3n de Cita N\xb0 ",null==m.cita?null:m.cita.id," "),a.xp6(4),a.Q6J("ngClass",a.kEZ(5,y,1===(null==m.cita?null:m.cita.statusId),2===(null==m.cita?null:m.cita.statusId),3===(null==m.cita?null:m.cita.statusId))),a.xp6(1),a.hij(" ",1===(null==m.cita?null:m.cita.statusId)?"Pendiente":2===(null==m.cita?null:m.cita.statusId)?"Aceptado":3===(null==m.cita?null:m.cita.statusId)?"Rechazado":"Desconocido"," "),a.xp6(4),a.Q6J("formGroup",m.formCita))},dependencies:[_.mk,u._Y,u.Fj,u.wV,u.JJ,u.JL,e.Hw,u.sg,u.u,b.lW,x.KE,x.hX,C.Nt,w.oG],styles:[".overview-sale[_ngcontent-%COMP%]{background:red;max-width:700px}.box-1[_ngcontent-%COMP%]{background-color:#fff;border-width:20px;border:solid 1px #1e293b;border-radius:5px;padding:10px 1px;margin:5px 17px}.btn-export[_ngcontent-%COMP%]{border-radius:4px;background:#d4d4d4;width:-moz-fit-content;width:fit-content;cursor:pointer;width:100%;color:#f0f8ff}.btn-whatsapp[_ngcontent-%COMP%]{background:#d4d4d4}.btn-pdf[_ngcontent-%COMP%]{background:#F15642}.btn-excel[_ngcontent-%COMP%]{background:#84BD5A}.fw-700[_ngcontent-%COMP%]{font-weight:700!important}.center-item[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:space-evenly;align-self:center}.backgoud-page[_ngcontent-%COMP%]{background:#F9F9F9}.text-amount[_ngcontent-%COMP%]{font-size:17px;font-weight:700}.card-item[_ngcontent-%COMP%]{background-color:#eaeded;border-radius:6px;padding:5px;margin-top:5px;height:70px}.center-items[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.background-white[_ngcontent-%COMP%]{background:white;border-radius:4px;height:100%}.background-green[_ngcontent-%COMP%]{background:#22C55E;border-radius:4px;height:100%}.title[_ngcontent-%COMP%]{font-weight:700;font-size:25px}.label-total[_ngcontent-%COMP%]{display:flex;font-size:20px;margin-top:10px}.footet-text[_ngcontent-%COMP%]{background-image:url(/assets/images/flags/footer-sale-note.png)}.item-preview[_ngcontent-%COMP%]{background:#f2f3f4!important;padding:5px;border-radius:10px}"]})},7017:(H,A,s)=>{s.r(A),s.d(A,{WarehouseModule:()=>W});var p=s(6895),g=s(8811),U=s(6713),f=s(8739),a=s(671),h=s(5861),u=s(5412),_=s(3558),e=s(4650),b=s(1481),x=s(6628),C=s(7392),w=s(4850),y=s(8306),k=s(6900);class q{constructor(i,t,n,r,l){this.dialogRef=i,this.sanitizer=t,this.service=n,this.router=r,this.imageSource=this.sanitizer.bypassSecurityTrustResourceUrl(_.B),this.id=l.id,this.id>0&&this.readData()}ngOnInit(){}close(){this.dialogRef.close(!0)}setPhoto(i){var t=this;return(0,h.Z)(function*(){t.imageSource=t.sanitizer.bypassSecurityTrustResourceUrl(i)})()}readData(){this.service.getById(this.id).subscribe(i=>{this.myProvider=i})}gestionaryProducts(){this.dialogRef.close(!0),this.router.navigate(["warehouse/warehouse/product/"+this.id])}}q.\u0275fac=function(i){return new(i||q)(e.Y36(u.so),e.Y36(b.H7),e.Y36(x.l),e.Y36(g.F0),e.Y36(u.WI))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-overview-warehouse"]],decls:49,vars:17,consts:[[1,"flex","flex-col","flex-auto","min-w-10"],[1,"container"],[1,"background-div"],[1,"flex","items-center","justify-between","dark:bg-gray-700"],[1,"close",3,"click"],["aria-hidden","false","aria-label","Example add icon","fontIcon","close"],[2,"display","flex","align-items","center","justify-content","center","width","100%","height","50%"],[1,"title-banner"],[1,"center-div"],["src","assets/images/logo/logo-2.png",1,"image-banner"],[1,"foreground-div"],[2,"display","flex","align-items","center","justify-content","center","width","100%","height","100%"],[1,"flex",2,"width","100%"],[1,"flex","flex-col","items-center","lg:items-start","mt-4","lg:mt-0","lg:ml-8"],[1,"text-lg","font-bold","leading-none"],[1,"text-secondary"],[1,"hidden","lg:flex","h-8","mx-8","border-l-2"],[1,"flex","items-center","mt-6","lg:mt-0","space-x-6"],[1,"flex","flex-col","items-center"],[1,"font-bold"],[1,"text-sm","font-medium","text-secondary"],[1,"p-5"],[1,"grid","grid-cols-12"],[1,"col-span-4"],[1,"flex","flex-col","flex-auto"],[3,"title","label"],[1,"col-span-6"],[3,"color","label","withFull","icon","click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"div"),e.TgZ(5,"div",4),e.NdJ("click",function(){return t.close()}),e._UZ(6,"mat-icon",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div")(9,"h1",7),e._uU(10,"Vista previa de Almacen"),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"img",9),e.qZA()()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),e._uU(18),e.qZA(),e.TgZ(19,"div",15),e._uU(20),e.qZA()(),e._UZ(21,"div",16),e.TgZ(22,"div",17)(23,"div",18)(24,"span",19),e._uU(25),e.qZA(),e.TgZ(26,"span",20),e._uU(27,"Productos"),e.qZA()()()()()()(),e._UZ(28,"mat-divider"),e.TgZ(29,"div",21)(30,"div",22)(31,"div",23)(32,"div",24),e._UZ(33,"card-info-label",25),e.qZA()(),e.TgZ(34,"div",23)(35,"div",24),e._UZ(36,"card-info-label",25),e.qZA()(),e.TgZ(37,"div",23)(38,"div",24),e._UZ(39,"card-info-label",25),e.qZA()()(),e.TgZ(40,"div",22)(41,"div",26)(42,"div",24),e._UZ(43,"card-info-label",25),e.qZA()(),e.TgZ(44,"div",26)(45,"div",24),e._UZ(46,"card-info-label",25),e.qZA()()(),e._UZ(47,"br"),e.TgZ(48,"btn-generic",27),e.NdJ("click",function(){return t.gestionaryProducts()}),e.qZA()()()),2&i&&(e.xp6(18),e.Oqu(null==t.myProvider?null:t.myProvider.name),e.xp6(2),e.Oqu(null==t.myProvider?null:t.myProvider.description),e.xp6(5),e.Oqu(null==t.myProvider?null:t.myProvider.countProduct),e.xp6(8),e.Q6J("title","Nombre :")("label",null==t.myProvider?null:t.myProvider.name),e.xp6(3),e.Q6J("title","C\xf3digo :")("label",null==t.myProvider?null:t.myProvider.code),e.xp6(3),e.Q6J("title","Tipo :")("label",null==t.myProvider||null==t.myProvider.type?null:t.myProvider.type.name),e.xp6(4),e.Q6J("title","Descripci\xf3n :")("label",null==t.myProvider?null:t.myProvider.description),e.xp6(3),e.Q6J("title","Ubicaci\xf3n :")("label",null==t.myProvider?null:t.myProvider.location),e.xp6(2),e.Q6J("color","green")("label","Gestionar Productos")("withFull",!0)("icon","archive"))},dependencies:[C.Hw,w.d,y.e,k.f],styles:[".banner[_ngcontent-%COMP%]{background-size:cover;background-image:url(https://cdn.shopify.com/s/files/1/0229/0839/files/Diseno_sin_titulo_29ead9f4-6b25-4986-83f6-c3ae7d32c486.png?format=jpg&quality=90&v=1670356366)}.close[_ngcontent-%COMP%]{margin:10px;cursor:pointer;background:#fff;color:#000;height:24px;border-radius:60px}.container[_ngcontent-%COMP%]{position:relative;width:100%;height:350px}.background-div[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(45deg,#A2C747,#66B503);position:absolute;top:0;left:0;z-index:1}.foreground-div[_ngcontent-%COMP%]{width:100%;height:20%;background-color:#fff!important;position:absolute;left:0;bottom:0;border-top-right-radius:40px;z-index:2;box-shadow:0 4px 6px #0000001a}.center-div[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-evenly}.title-banner[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:24px}.image-banner[_ngcontent-%COMP%]{margin-top:20px;width:140px}"]});var T=s(5226),m=s.n(T),d=s(4006),R=s(4859),v=s(9549),P=s(284),le=s(5078);function fe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.clearSearch())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function _e(o,i){1&o&&(e.TgZ(0,"th",29),e._uU(1," No."),e.qZA())}function ve(o,i){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.id," ")}}function be(o,i){1&o&&(e.TgZ(0,"th",29),e._uU(1," Nombre "),e.qZA())}function xe(o,i){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Ze(o,i){1&o&&(e.TgZ(0,"th",29),e._uU(1," Descripci\xf3n "),e.qZA())}function Ce(o,i){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function Te(o,i){1&o&&(e.TgZ(0,"th",29),e._uU(1," Codigo "),e.qZA())}function we(o,i){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function ye(o,i){1&o&&(e.TgZ(0,"th",29),e._uU(1," Ubicaci\xf3n "),e.qZA())}function Ae(o,i){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.location," ")}}function Ue(o,i){1&o&&(e.TgZ(0,"th",29),e._uU(1," Estado "),e.qZA())}function qe(o,i){1&o&&e._UZ(0,"chips-faam",32),2&o&&e.Q6J("color","green")("label","Activo")}function Ie(o,i){1&o&&e._UZ(0,"chips-faam",32),2&o&&e.Q6J("color","orange")("label","Inactivo")}function ke(o,i){if(1&o&&(e.TgZ(0,"td",30),e.YNc(1,qe,1,2,"chips-faam",31),e.YNc(2,Ie,1,2,"chips-faam",31),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(1),e.Q6J("ngIf",!t.isActive)}}function Me(o,i){1&o&&(e.TgZ(0,"th",29),e._uU(1," Acciones "),e.qZA())}function Pe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,l=e.oxw();return e.KtG(l.lowWarehouse(r))}),e._uU(1,"delete_forever"),e.qZA()}}function Se(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,l=e.oxw();return e.KtG(l.upWarehouse(r))}),e._uU(1,"check_circle"),e.qZA()}}function Oe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",30)(1,"mat-icon",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.overView(l))}),e._uU(2,"visibility"),e.qZA(),e.TgZ(3,"mat-icon",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.update(l))}),e._uU(4,"create"),e.qZA(),e.YNc(5,Pe,2,0,"mat-icon",34),e.YNc(6,Se,2,0,"mat-icon",34),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(5),e.Q6J("ngIf",t.isActive),e.xp6(1),e.Q6J("ngIf",!t.isActive)}}function Je(o,i){1&o&&(e.TgZ(0,"th",29),e._uU(1," Gestionar "),e.qZA())}function Ne(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",30)(1,"div",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.gestioinaryProduct(l.id))}),e._UZ(2,"mat-icon",36),e._uU(3," Mis Productos "),e.qZA()()}}function Fe(o,i){1&o&&e._UZ(0,"tr",37)}function Qe(o,i){1&o&&e._UZ(0,"tr",38)}const Le=function(){return[5,10,20]},We=[];class S{constructor(i,t,n,r){this.service=i,this.fb=t,this.router=n,this.dialog=r,this.displayedColumns=["id","name","description","code","location","isActive","acciones","gestionary"],this.dataSource=new a.by(We),this.isFilterVisible=!1,this.searchValue="",this.listWarehouse=[],this.columns=[],this.actions=[],this.form=this.fb.group({search:[""]}),this.form.get("search")?.valueChanges.subscribe(l=>{this.applyFilter(l)}),this.dataSource.filterPredicate=(l,c)=>{const Z=l.name.toLowerCase().includes(c.toLowerCase()),se=l.code.toLowerCase().includes(c.toLowerCase());return Z||se}}applyFilter(i){this.searchValue=i,this.dataSource.filter=i.trim().toLowerCase()}clearSearch(){this.searchValue="",this.form.get("search").setValue("")}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.readData(),this.columns=[{prop:"Id",value:"id"},{prop:"Nombre",value:"name"},{prop:"Descripci\xf3n",value:"Description"},{prop:"Ubicaci\xf3n",value:"ubication"}],this.actions=["Ver","Editar","Eliminar"]}readData(){this.service.getAllWarehouse().subscribe(i=>{this.dataSource=new a.by(i)})}createNew(){this.router.navigate(["warehouse/warehouse/store"])}gestioinaryProduct(i){this.router.navigate(["warehouse/warehouse/product/"+i])}update(i){this.router.navigate(["warehouse/warehouse/store/"+i.id])}overView(i){this.dialog.open(q,{data:{id:i.id},minWidth:"380px",maxWidth:"380px"}).afterClosed().subscribe(n=>{})}lowWarehouse(i){m().fire({title:"Seguro que quiere dar de baja?",text:"Recuerda que no estas eliminando permanentemente!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, dar de Baja!"}).then(t=>{t.isConfirmed&&this.service.lowWarehouseById(i.id).subscribe(n=>{this.readData(),localStorage.removeItem("warehouseDefault"),m().fire("Baja Exitosa!","Su Almacen se dio de baja exitosamente.","success")})})}senfilter(i){}toggleFilter(){this.isFilterVisible=!this.isFilterVisible}upWarehouse(i){m().fire({title:"Seguro que quiere dar de alta?",text:"Recuerda que s\xed, estas activando nuevamente el almancen!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, activar!"}).then(t=>{t.isConfirmed&&this.service.upWarehouseById(i.id).subscribe(n=>{this.readData(),localStorage.removeItem("warehouseDefault"),m().fire("Habilitaci\xf3n Exitosa!","Su Almacen se activo exitosamente.","success")})})}}S.\u0275fac=function(i){return new(i||S)(e.Y36(x.l),e.Y36(d.qu),e.Y36(g.F0),e.Y36(u.uw))},S.\u0275cmp=e.Xpm({type:S,selectors:[["warehouse-gestionary"]],viewQuery:function(i,t){if(1&i&&e.Gf(f.NW,5),2&i){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},decls:45,vars:14,consts:[[1,"contenido"],[1,"flex","flex-col","md:flex-row","items-center","justify-between","dark:bg-gray-700","p-4"],[1,"w-full","mt-4"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],[1,"flex","flex-col","md:flex-row","items-center","mt-4","md:mt-0"],[1,"px-6","ml-3",3,"color","label","icon","withFull","click"],[1,"w-full",3,"formGroup"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["placeholder","Buscar por nombre..","matInput","",3,"formControlName"],["mat-icon-button","","class","absolute right-0",3,"click",4,"ngIf"],[1,"mat-elevation-z0","table-responsive","mt-8"],[1,"overflow-x-auto"],["mat-table","",1,"table","min-w-full",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","code"],["matColumnDef","location"],["matColumnDef","isActive"],["matColumnDef","acciones"],["matColumnDef","gestionary"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-icon-button","",1,"absolute","right-0",3,"click"],["mat-header-cell",""],["mat-cell",""],[3,"color","label",4,"ngIf"],[3,"color","label"],[1,"mr-2",3,"click"],["class","mr-2",3,"click",4,"ngIf"],[1,"btn-gestionary-product","flex","items-center","justify-center","p-1","pl-2","pr-2",3,"click"],["svgIcon","heroicons_outline:archive",1,"mr-1",2,"color","white !important"],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Listado de sucursales"),e.qZA(),e.TgZ(5,"div",4),e._uU(6,"Modulo de gestiones para sucursales"),e.qZA()(),e.TgZ(7,"div",5)(8,"btn-generic",6),e.NdJ("click",function(){return t.createNew()}),e.qZA()()(),e.TgZ(9,"div")(10,"form",7)(11,"mat-form-field",8),e._UZ(12,"mat-icon",9)(13,"input",10),e.YNc(14,fe,3,0,"button",11),e.qZA()()(),e.TgZ(15,"div",12)(16,"div",13)(17,"table",14),e.ynx(18,15),e.YNc(19,_e,2,0,"th",16),e.YNc(20,ve,2,1,"td",17),e.BQk(),e.ynx(21,18),e.YNc(22,be,2,0,"th",16),e.YNc(23,xe,2,1,"td",17),e.BQk(),e.ynx(24,19),e.YNc(25,Ze,2,0,"th",16),e.YNc(26,Ce,2,1,"td",17),e.BQk(),e.ynx(27,20),e.YNc(28,Te,2,0,"th",16),e.YNc(29,we,2,1,"td",17),e.BQk(),e.ynx(30,21),e.YNc(31,ye,2,0,"th",16),e.YNc(32,Ae,2,1,"td",17),e.BQk(),e.ynx(33,22),e.YNc(34,Ue,2,0,"th",16),e.YNc(35,ke,3,2,"td",17),e.BQk(),e.ynx(36,23),e.YNc(37,Me,2,0,"th",16),e.YNc(38,Oe,7,2,"td",17),e.BQk(),e.ynx(39,24),e.YNc(40,Je,2,0,"th",16),e.YNc(41,Ne,4,0,"td",17),e.BQk(),e.YNc(42,Fe,1,0,"tr",25),e.YNc(43,Qe,1,0,"tr",26),e.qZA()(),e._UZ(44,"mat-paginator",27),e.qZA()()),2&i&&(e.xp6(8),e.Q6J("color","green")("label","Crear Nuevo")("icon","add")("withFull",!1),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControlName","search"),e.xp6(1),e.Q6J("ngIf",""!==t.form.get("search").value),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(13,Le)))},dependencies:[p.O5,d._Y,d.Fj,d.JJ,d.JL,C.Hw,d.sg,d.u,R.RK,v.KE,v.qo,P.Nt,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,f.NW,le.i,y.e],styles:[".contenido[_ngcontent-%COMP%]{width:100%;padding:20px;margin:8px;border-radius:5px;background:#fff;transition:all .3s ease-in-out;box-shadow:0 0 25px #0000001a}.btn-gestionary-product[_ngcontent-%COMP%]{border-radius:8px;background:#b4beca;width:-moz-fit-content;width:fit-content;color:#f0f8ff;cursor:pointer}"]});var ee=s(6588),te=s(4983),ie=s(2540),Re=s(7009),De=s(9349),O=s(4385),J=s(3238),ce=s(2005);function Ee(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"chips-info-label",25),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.addQuantity(l))}),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("title",null==t||null==t.unitMeasurementMotive?null:t.unitMeasurementMotive.name)("active",null==t?null:t.check)}}function Ye(o,i){if(1&o&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}class D{constructor(i,t,n,r,l){this.dialogRef=i,this.serviceWarehouse=t,this.fb=n,this.snackBar=r,this.nameClassifier="",this.pathClassifier="",this.isCreate=!0,this.product=null,this.image=null,this.checkUnitMeasurement=null,this.amountAvailable=null,this.listUnitMeasurement=[],this.message="",this.isValidData=!1,this.activeAlert=!1,this.product=l.data,this.amountAvailable=this.product.amount,this.checkUnitMeasurement=this.product.unitMeasurement,this.listUnitMeasurement=l.equivalences,this.image=`data:image/png;base64,${this.product.product.picture}`,this.form=this.fb.group({warehouseOriginId:[this.product.warehouseId,[d.kI.required]],warehouseDestinationId:[null,[d.kI.required]],amount:[null,[d.kI.required]],noteRequest:[null]})}ngOnInit(){this.serviceWarehouse.getAllWarehouse().subscribe(i=>{this.listWarehouse=i})}close(){this.dialogRef.close(!0)}addQuantity(i){this.listUnitMeasurement.map(t=>{t.check=t.unitMeasurementMotive.name===i.unitMeasurementMotive.name}),this.setAvaliable(),this.validateStockAvailable()}setAvaliable(){let i=this.listUnitMeasurement.filter(t=>t.check)[0];this.checkUnitMeasurement=i.unitMeasurementMotive,this.amountAvailable=parseFloat((this.product.amount/i.factor).toFixed(2))}save(){if(!this.form.valid)return alert("datos invalidos");this.snackBar.open("Almacen seleccionado","",{duration:1500,horizontalPosition:"end",verticalPosition:"top"}),this.dialogRef.close(this.form.value)}validateStockAvailable(){let i=parseFloat(this.form.get("amount").value),t=this.amountAvailable;i>t?(this.message="Stock Disponible : "+t+" "+this.checkUnitMeasurement.name,this.isValidData=!1):(this.message="",this.isValidData=!0)}sendRequeset(){this.activeAlert=!1;let i=this.form.value;i.warehouseOriginId!==i.warehouseDestinationId?this.isValidData?(i.details=[{productId:this.product.product.id,amount:parseFloat(i.amount),amountOrigin:this.product.unitMeasurement.id,unitMeasurementId:this.checkUnitMeasurement.id}],delete i.amount,this.activeAlert=!1,this.serviceWarehouse.createMovementRequest(i).subscribe(t=>{m().fire({position:"top-end",icon:"success",title:"Solicitud creada exitosamente!",showConfirmButton:!1,timer:1500}),this.dialogRef.close(!0)})):this.activeAlert=!0:m().fire({icon:"error",title:"Oops...",text:"No se pueden hacer traspaso al mismo almacen!"})}}D.\u0275fac=function(i){return new(i||D)(e.Y36(u.so),e.Y36(x.l),e.Y36(d.qu),e.Y36(Re.ux),e.Y36(u.WI))},D.\u0275cmp=e.Xpm({type:D,selectors:[["app-form-movement-only-item"]],decls:44,vars:30,consts:[[1,"m-4","w-80"],[1,"flex","items-center","justify-between","dark:bg-gray-700"],["svgIcon","heroicons_outline:x",3,"click"],["ngNativeValidate","","autocomplete","off",3,"formGroup"],[1,"w-full","mt-1"],[1,"text-2xl","text-center","font-semibold","tracking-tight","leading-6"],[1,"flex","items-center","justify-center"],[2,"width","170px",3,"src"],[2,"display","ruby"],[3,"title","active","click",4,"ngFor","ngForOf"],[1,"available","w-full","px-3","py-1","font-bold"],[1,"mt-2","mb-2"],[1,"w-full","box"],[1,"alert"],[1,"grid","sm:grid-cols-12","gap-6","w-full","mt-1"],[1,"sm:col-span-12"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","name","suggestedPrice",3,"formControlName","keyup"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"w-full","flex-auto",3,"ngClass"],["matInput","","cdkTextareaAutosize","",3,"formControlName","cdkAutosizeMinRows"],["matSuffix","",1,"icon-size-5",3,"svgIcon"],[3,"color","label","icon","withFull","disabled","buttonClick"],[3,"title","active","click"],[3,"value"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div"),e.TgZ(3,"div")(4,"mat-icon",2),e.NdJ("click",function(){return t.close()}),e.qZA()()(),e._UZ(5,"mat-divider"),e.TgZ(6,"form",3)(7,"div",4)(8,"div",5),e._uU(9),e.qZA()(),e.TgZ(10,"div",6),e._UZ(11,"img",7),e.qZA(),e.TgZ(12,"div",8),e.YNc(13,Ee,1,2,"chips-info-label",9),e.qZA(),e.TgZ(14,"div",4)(15,"div",10),e._uU(16),e.qZA()(),e._UZ(17,"mat-divider",11),e.TgZ(18,"div",12)(19,"p",13),e._uU(20),e.qZA()(),e.TgZ(21,"div",14)(22,"div",15)(23,"mat-form-field",16)(24,"mat-label"),e._uU(25,"Cantidad a traspasar:"),e.qZA(),e._UZ(26,"mat-icon",17),e.TgZ(27,"input",18),e.NdJ("keyup",function(){return t.validateStockAvailable()}),e.qZA()()(),e.TgZ(28,"div",15)(29,"mat-form-field",16)(30,"mat-label"),e._uU(31,"Almacen Destino: "),e.qZA(),e._UZ(32,"mat-icon",17),e.TgZ(33,"mat-select",19),e.YNc(34,Ye,2,2,"mat-option",20),e.qZA()()(),e.TgZ(35,"div",15)(36,"mat-form-field",21)(37,"mat-label"),e._uU(38,"Nota:"),e.qZA(),e._UZ(39,"textarea",22)(40,"mat-icon",23),e.qZA()()(),e.TgZ(41,"div",1)(42,"btn-generic",24),e.NdJ("buttonClick",function(){return t.close()}),e.qZA(),e.TgZ(43,"btn-generic",24),e.NdJ("buttonClick",function(){return t.sendRequeset()}),e.qZA()()()()),2&i&&(e.xp6(6),e.Q6J("formGroup",t.form),e.xp6(3),e.hij("\xbfSeguro que quieres traspasar el articulo ",null==t.product||null==t.product.product?null:t.product.product.name,"?"),e.xp6(2),e.s9C("src",t.image,e.LSH),e.xp6(2),e.Q6J("ngForOf",t.listUnitMeasurement),e.xp6(3),e.AsE(" Disponible: ",t.amountAvailable," ",null==t.checkUnitMeasurement?null:t.checkUnitMeasurement.name," "),e.xp6(3),e.ekj("parpadea",t.activeAlert),e.xp6(1),e.Oqu(t.message),e.xp6(3),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:currency-dollar"),e.xp6(1),e.Q6J("formControlName","amount"),e.xp6(2),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:library"),e.xp6(1),e.Q6J("formControlName","warehouseDestinationId"),e.xp6(1),e.Q6J("ngForOf",t.listWarehouse),e.xp6(2),e.Q6J("ngClass","formFieldHelpers"),e.xp6(3),e.Q6J("formControlName","noteRequest")("cdkAutosizeMinRows",3),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(2),e.Q6J("color","secondary")("label","Cancelar")("icon","close")("withFull",!1)("disabled",!1),e.xp6(1),e.Q6J("color","green")("label","Solicitar")("icon","check")("withFull",!1)("disabled",!1))},dependencies:[p.mk,p.sg,d.Fj,d.JJ,d.JL,C.Hw,d.sg,d.u,v.KE,v.hX,v.qo,v.R9,P.Nt,De.IC,O.gD,J.ey,w.d,y.e,ce.h],styles:[".available[_ngcontent-%COMP%]{background:#A2C747;color:#fff;height:46px;font-size:20px;display:flex;justify-content:space-around;place-items:center;border-radius:10px}.box[_ngcontent-%COMP%]{width:100%;height:25px}.alert[_ngcontent-%COMP%]{color:red}.parpadea[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_parpadeo;animation-duration:.9s;animation-timing-function:linear;animation-iteration-count:3;-webkit-animation-name:_ngcontent-%COMP%_parpadeo;-webkit-animation-duration:.9s;-webkit-animation-timing-function:linear;-webkit-animation-iteration-count:3}@keyframes _ngcontent-%COMP%_parpadeo{0%{opacity:1}50%{opacity:0}to{opacity:1}}"]});var Be=s(6308),je=s(1837),ze=s(1913),oe=s(5830);function $e(o,i){1&o&&(e.TgZ(0,"th",18),e._uU(1," No. "),e.qZA())}function Ge(o,i){if(1&o&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.id," ")}}function Ve(o,i){1&o&&(e.TgZ(0,"th",18),e._uU(1," Nombre "),e.qZA())}function He(o,i){if(1&o&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t||null==t.product?null:t.product.name," ")}}function Ke(o,i){1&o&&(e.TgZ(0,"th",18),e._uU(1," Cantidad "),e.qZA())}function Xe(o,i){if(1&o&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.amount," ")}}function et(o,i){1&o&&(e.TgZ(0,"th",18),e._uU(1," Unidad de medida "),e.qZA())}function tt(o,i){if(1&o&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t||null==t.unitMeasurenment?null:t.unitMeasurenment.name," ")}}function it(o,i){1&o&&e._UZ(0,"tr",20)}function ot(o,i){1&o&&e._UZ(0,"tr",21)}const nt=[];class N{constructor(i,t,n){this.serviceWarehouse=t,this.dialogRef=n,this.displayedColumns=["id","name","amount","unitmeasurenment"],this.dataSource=new a.by(nt),this.id=0,this.dataRequest=null,this.id=i.id}gestionaryRequest(i){var t=this;let n="accept"==i?"Ingrese alguna nota de aceptaci\xf3n":"Motivo de rechazo?";var r;m().fire({title:n,input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Aceptar",showLoaderOnConfirm:!0,preConfirm:(r=(0,h.Z)(function*(l){try{let c="accept"==i?{noteAccept:l}:{noteCancelled:l};"accept"==i?t.serviceWarehouse.acceptRequestMovement(t.id,c).subscribe(Z=>{m().fire({position:"top-end",icon:"success",title:"Solicitud aceptada exitosamente!",showConfirmButton:!1,timer:1500}),t.dialogRef.close(!0)}):t.serviceWarehouse.rejectRequestMovement(t.id,c).subscribe(Z=>{m().fire({position:"top-end",icon:"success",title:"Solicitud rechazada exitosamente!",showConfirmButton:!1,timer:1500}),t.dialogRef.close(!0)})}catch(c){m().showValidationMessage(`\n            Request failed: ${c}\n          `)}}),function(c){return r.apply(this,arguments)}),allowOutsideClick:()=>!m().isLoading()})}ngOnInit(){this.serviceWarehouse.getMovementById(this.id).subscribe(i=>{this.dataRequest=i,this.dataSource=i.details})}close(){this.dialogRef.close(!0)}}N.\u0275fac=function(i){return new(i||N)(e.Y36(u.WI),e.Y36(x.l),e.Y36(u.so))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-overview-movement"]],decls:53,vars:20,consts:[[1,"p-6"],[1,"flex","items-center","justify-between","dark:bg-gray-700"],[3,"click"],["aria-hidden","false","aria-label","Example add icon","fontIcon","close"],[1,"content"],[1,"mat-elevation-z0","table-responsive"],["mat-table","",1,"table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","amount"],["matColumnDef","unitmeasurenment"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mt-2","mb-2"],[1,"flex","items-center","justify-center","dark:bg-gray-700"],[1,"px-6","ml-3",3,"color","label","icon","withFull","disabled","buttonClick"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._uU(3," Gestionar Solicitud "),e.qZA(),e.TgZ(4,"div",2),e.NdJ("click",function(){return t.close()}),e._UZ(5,"mat-icon",3),e.qZA()(),e._UZ(6,"mat-divider"),e.TgZ(7,"div",4)(8,"div",1)(9,"div")(10,"p")(11,"strong"),e._uU(12,"Fecha de solicitud: "),e.qZA(),e._uU(13),e.ALo(14,"dateFormatHours"),e.qZA(),e.TgZ(15,"p")(16,"strong"),e._uU(17,"Usuario Solicitante: "),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"p")(20,"strong"),e._uU(21,"Almacen Origen: "),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"p")(24,"strong"),e._uU(25,"Nota de Solicitante: "),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"p")(28,"strong"),e._uU(29,"Estado de solicitud: "),e.qZA(),e._uU(30),e.qZA()()(),e.TgZ(31,"div")(32,"div",5)(33,"table",6),e.ynx(34,7),e.YNc(35,$e,2,0,"th",8),e.YNc(36,Ge,2,1,"td",9),e.BQk(),e.ynx(37,10),e.YNc(38,Ve,2,0,"th",8),e.YNc(39,He,2,1,"td",9),e.BQk(),e.ynx(40,11),e.YNc(41,Ke,2,0,"th",8),e.YNc(42,Xe,2,1,"td",9),e.BQk(),e.ynx(43,12),e.YNc(44,et,2,0,"th",8),e.YNc(45,tt,2,1,"td",9),e.BQk(),e.YNc(46,it,1,0,"tr",13),e.YNc(47,ot,1,0,"tr",14),e.qZA()(),e._UZ(48,"mat-divider",15),e.qZA(),e.TgZ(49,"form")(50,"div",16)(51,"btn-generic",17),e.NdJ("buttonClick",function(){return t.gestionaryRequest("reject")}),e.qZA(),e.TgZ(52,"btn-generic",17),e.NdJ("buttonClick",function(){return t.gestionaryRequest("accept")}),e.qZA()()()()()),2&i&&(e.xp6(13),e.hij(" ",e.lcZ(14,18,t.dataRequest.movementDateRequest)," "),e.xp6(5),e.hij(" ",t.dataRequest.userRequestId," "),e.xp6(4),e.hij(" ",t.dataRequest.warehouseOriginId," "),e.xp6(4),e.hij(" ",t.dataRequest.noteRequest," "),e.xp6(4),e.hij(" ",t.dataRequest.status.name," "),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(4),e.Q6J("color","secondary")("label","  Rechazar Ingreso ")("icon","close")("withFull",!1)("disabled",1!==t.dataRequest.status.id),e.xp6(1),e.Q6J("color","green")("label","Aceptar Ingreso")("icon","check")("withFull",!1)("disabled",1!==t.dataRequest.status.id))},dependencies:[d._Y,d.JL,d.F,C.Hw,w.d,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,y.e,oe.L]});var ue=s(2420),de=s(3848),ne=s(7084),K=s(9836),ae=s(8905),X=s(8183);const at=["aForm2"];function rt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"chips-info-label",57),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.addQuantity(l))}),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("title",null==t||null==t.unitMeasurement?null:t.unitMeasurement.name)("active",null==t?null:t.check)}}function st(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"div",60)(3,"div",28)(4,"p")(5,"strong"),e._uU(6),e.qZA()()()(),e.TgZ(7,"div",60)(8,"div",61)(9,"label",62),e._uU(10,"Ver Compra:"),e.qZA(),e.TgZ(11,"mat-icon",63),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.overViewShopping(l.shoppingId))}),e._uU(12,"visibility"),e.qZA()()()(),e.TgZ(13,"div",64)(14,"div",60)(15,"div",65)(16,"div",66),e._uU(17),e.ALo(18,"number"),e.qZA()()(),e.TgZ(19,"div",60)(20,"div",61)(21,"div",67),e._uU(22),e.ALo(23,"number"),e.qZA()()()(),e._UZ(24,"br"),e.TgZ(25,"label",68),e._uU(26,"Detalle:"),e.qZA(),e._UZ(27,"mat-divider",69),e.TgZ(28,"div",70)(29,"div",71)(30,"div",72)(31,"p",73),e._uU(32," Cantidad"),e.qZA(),e.TgZ(33,"p"),e._uU(34),e.qZA()()(),e.TgZ(35,"div",71)(36,"div",72)(37,"p",73),e._uU(38," Medida"),e.qZA(),e.TgZ(39,"p"),e._uU(40),e.qZA()()(),e.TgZ(41,"div",71)(42,"div",72)(43,"p",73),e._uU(44," P.U."),e.qZA(),e.TgZ(45,"p"),e._uU(46),e.qZA()()(),e.TgZ(47,"div",71)(48,"div",72)(49,"p",73),e._uU(50,"Vencimiento"),e.qZA(),e.TgZ(51,"p"),e._uU(52),e.ALo(53,"dateFormat"),e.qZA()()()(),e._UZ(54,"mat-divider"),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(6),e.hij("Nro Compra : ",t.shoppingId,""),e.xp6(11),e.hij(" Cant. Disponible: ",e.xi3(18,7,null==t?null:t.amountAvailable,"1.0-2")," "),e.xp6(5),e.hij(" Cant. Disponible: ",e.xi3(23,10,null==t?null:t.amountOut,"1.0-2")," "),e.xp6(12),e.hij("",t.amountOrigin," "),e.xp6(6),e.hij("",t.unitMeasurement.name," "),e.xp6(6),e.hij("",t.purchasePrice," "),e.xp6(6),e.hij(" ",e.lcZ(53,13,t.expirationDate)," ")}}function lt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"chips-info-label",57),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.addQuantity(l))}),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("title",null==t||null==t.unitMeasurement?null:t.unitMeasurement.name)("active",null==t?null:t.check)}}function ct(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"chips-info-label",57),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.addQuantity(l))}),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("title",null==t||null==t.unitMeasurement?null:t.unitMeasurement.name)("active",null==t?null:t.check)}}function ut(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"chips-info-label",57),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.addQuantity(l))}),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("title",null==t||null==t.unitMeasurement?null:t.unitMeasurement.name)("active",null==t?null:t.check)}}function dt(o,i){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.DjV("p-1 pl-2 pr-2 w-full px-1 rounded-full text-xs text-center font-semibold text-",t.color,"-800 bg-",t.color,"-100 dark:text-",t.color,"-50 dark:bg-",t.color,"-500"),e.xp6(1),e.hij(" ",t.text," ")}}function mt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,dt,2,7,"div",84),e.BQk()),2&o){const t=i.$implicit,n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.status.id===t.id)}}function pt(o,i){if(1&o&&(e.TgZ(0,"div",76)(1,"div",28)(2,"p")(3,"strong"),e._uU(4,"Nota de Cancelacion : "),e.qZA(),e._uU(5),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(null==t?null:t.noteCancelled)}}function ht(o,i){if(1&o&&(e.TgZ(0,"div",76)(1,"div",28)(2,"p")(3,"strong"),e._uU(4,"Nota de Aceptaci\xf3n : "),e.qZA(),e._uU(5),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(null==t?null:t.noteAccept)}}function gt(o,i){1&o&&(e.TgZ(0,"div",85),e._uU(1," Salida "),e.qZA())}function ft(o,i){1&o&&(e.TgZ(0,"div",86),e._uU(1," Ingreso "),e.qZA())}const _t=function(){return{id:1,text:"Solicitado",color:"blue"}},vt=function(){return{id:2,text:"Aceptado",color:"green"}},bt=function(){return{id:3,text:"Cancelado",color:"red"}},xt=function(o,i,t){return[o,i,t]};function Zt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"mat-divider"),e.TgZ(2,"div",74)(3,"div",1)(4,"div")(5,"strong"),e._uU(6),e.qZA()(),e.TgZ(7,"div"),e.YNc(8,mt,2,1,"ng-container",56),e.qZA()(),e.TgZ(9,"div",75)(10,"div",76)(11,"div",28)(12,"p")(13,"strong"),e._uU(14," Fecha Solcitud: "),e.qZA(),e._uU(15),e.ALo(16,"dateFormatHours"),e.qZA()()(),e.TgZ(17,"div",76)(18,"div",28)(19,"p")(20,"strong"),e._uU(21," Fecha Aceptada: "),e.qZA(),e._uU(22),e.ALo(23,"dateFormatHours"),e.qZA()()(),e.TgZ(24,"div",76)(25,"div",28)(26,"p")(27,"strong"),e._uU(28,"Nota de Solicitud : "),e.qZA(),e._uU(29),e.qZA()()(),e.YNc(30,pt,6,1,"div",77),e.YNc(31,ht,6,1,"div",77),e.TgZ(32,"div",78)(33,"div",28)(34,"p")(35,"strong"),e._uU(36,"Tipo : "),e.qZA()()()(),e.TgZ(37,"div",71)(38,"div",28),e.YNc(39,gt,2,0,"div",79),e.YNc(40,ft,2,0,"div",80),e.qZA()(),e.TgZ(41,"div",81),e._UZ(42,"div",28),e.qZA(),e.TgZ(43,"div",82),e._UZ(44,"mat-divider",17),e.TgZ(45,"div",28)(46,"btn-generic",83),e.NdJ("buttonClick",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.gestioinaryProduct(l.id))}),e.qZA()()()()()()}if(2&o){const t=i.$implicit,n=e.oxw();e.xp6(6),e.hij("Cod: ",t.id,""),e.xp6(2),e.Q6J("ngForOf",e.kEZ(21,xt,e.DdM(18,_t),e.DdM(19,vt),e.DdM(20,bt))),e.xp6(7),e.Oqu(e.lcZ(16,14,null==t?null:t.movementDateRequest)),e.xp6(7),e.Oqu(e.lcZ(23,16,null==t?null:t.movementDateAccept)),e.xp6(7),e.Oqu(null==t?null:t.noteRequest),e.xp6(1),e.Q6J("ngIf",3===(null==t||null==t.status?null:t.status.id)),e.xp6(1),e.Q6J("ngIf",2===(null==t||null==t.status?null:t.status.id)),e.xp6(8),e.Q6J("ngIf",t.warehouseOriginId===n.product.warehouseId),e.xp6(1),e.Q6J("ngIf",t.warehouseOriginId!==n.product.warehouseId),e.xp6(6),e.Q6J("color","secondary")("label","Gestionar")("icon","vertical_split")("withFull",!0)("disabled",!1)}}const me=[];class M{constructor(i,t,n,r,l,c,Z,se){this.dialogRef=i,this.fb=n,this.dialog=r,this.service=l,this.router=c,this.serviceWarehouse=Z,this.cdr=se,this.displayedColumns=["id","pettyCashInit","amountEnd","isActive","acciones"],this.displayedColumnsMovement=["id","movementDateRequest","warehouseOriginId","isActive","acciones"],this.dataSource=new a.by(me),this.dataSourceMovement=new a.by(me),this.now=je.ou.now(),this.page=0,this.limit=10,this.totalLength=400,this.pagination={endIndex:9,lastPage:3,length:14,page:0,size:5,startIndex:0},this.listOptionsPage=[5,10,20,50,100],this.pettyCash=!1,this.isValidData=!0,this.activeAlert=!1,this.message="",this.hasEquivalences=!1,this.checkUnitMeasurement=null,this.labelUnitMeasurement="",this.amountAvailable=null,this.amountAvailableFuture=0,this.listWarehouseMovement=null,this.listHistory=null,this.currentWarehouseProduct=t,null==t?.data?.product?.picture&&(t.data.product.picture=_.B.split(",")[1]),this.product=t.data,this.isNew=t.isNew,this.hasEquivalences=this.product.product.hasEquivalences,this.currentUnitMeasurement=this.product.unitMeasurement,this.isNew||(this.product.name=this.product.product.name,this.product.description=this.product.product.description),this.form=this.fb.group({SuggestPriceShopping:[null],SuggestPriceSale:[null],count:[null],avaliable:[null],discount:[null],subTotal:[null]}),this.formAdd=this.fb.group({amount:[0,[d.kI.required]],motiveId:[1,[d.kI.required]],price:[null,[d.kI.required]]}),this.resetPaginator()}ngAfterViewInit(){setTimeout(()=>{(null!==this.product||void 0!==this.product)&&(this.isNew?this.setListEquivalences():this.setValueExisting(this.product)),this.cdr.detectChanges()},0)}pageEvent(i){this.limit=i.pageSize,this.page=i.pageIndex}gestionaryEquivalences(){this.close(),this.router.navigate(["product/product/equivalence/"+this.product?.product?.id])}gestioinaryProduct(i){this.dialog.open(N,{data:{id:i},width:"80vw",maxWidth:"550px"}).afterClosed().subscribe(n=>{n&&this.changeMovement()})}overView(i){}overViewShopping(i){this.dialog.open(ze.I,{maxHeight:"90vh",data:{id:i}}).afterClosed().subscribe(n=>{})}ngOnInit(){}addQuantity(i){this.labelUnitMeasurement=i.unitMeasurement.name,this.listUnitMeasurement.map(t=>{t.check=t?.unitMeasurement?.name===i?.unitMeasurement?.name}),this.form.get("SuggestPriceShopping").setValue(i?.suggestedPricePurchase),this.form.get("SuggestPriceSale").setValue(i?.suggestedPriceSale),this.formAdd.get("amount").setValue(0),this.setAvaliable()}setAvaliable(){let i=this.listUnitMeasurement.filter(n=>n.check)[0];this.checkUnitMeasurement=i.unitMeasurementId;let t=this.listUnitMeasurementOrigin.filter(n=>n.unitMeasurementMotiveId==this.checkUnitMeasurement)[0].factor;this.amountAvailable=parseFloat((this.product.amount/t).toFixed(2)),this.amountAvailableFuture=this.amountAvailable}setValueExisting(i){this.form.get("ProductWarehouseId").setValue(i?.ProductWarehouseId),this.form.get("suggestedPrice").setValue(i?.suggestedPrice),this.form.get("count").setValue(i?.count),this.form.get("avaliable").setValue(i?.avaliable),this.form.get("discount").setValue(i?.discount),this.form.get("subTotal").setValue(i?.subTotal)}setListEquivalences(){this.service.getAllProductEquivalence(this.product.product.id).subscribe(i=>{this.listUnitMeasurementOrigin=i,this.service.getListWarehouseProductEquivalence(this.product.id).subscribe(t=>{this.listUnitMeasurement=t,this.listUnitMeasurement.forEach(n=>{n.unitMeasurementId===this.product.unitMeasurement.id&&(n.check=!0,this.addQuantity(n))})})})}selectTab(i){3==i.index&&this.changeMovement(),1==i.index&&this.changeHistory()}changeMovement(){this.serviceWarehouse.getMovementByProductId(this.product.warehouseId,this.product.product.id).subscribe(i=>{this.listWarehouseMovement=i})}changeHistory(){this.serviceWarehouse.getHistoryByProductId(this.product.id).subscribe(i=>{this.listHistory=i})}close(){this.form.reset(),this.dialogRef.close(!0)}validateStockAvailable(){let i=parseFloat(this.form.get("count").value),t=parseFloat(this.form.get("avaliable").value);i>t?(this.message="Stock Disponible : "+t,this.isValidData=!1):(this.message="",this.isValidData=!0)}movementItem(){this.dialog.open(D,{data:{data:this.product,equivalences:this.listUnitMeasurement}}).afterClosed().subscribe(t=>{t&&this.dialogRef.close(!0)})}get getUnitSelect(){return this.product.product.hasEquivalences&&null!==this.product.product.hasEquivalences?this.listUnitMeasurement.filter(t=>t.check)[0].unitMeasurementDestination:this.product.unitMeasurement}removeItem(){let t=this.listUnitMeasurement.filter(({check:n})=>n)[0].warehouseProductId;m().fire({title:"\xbfSeguro que quieres eliminar este producto?",text:"Recuerda que se eliminar\xe1 solo para esta sucursal!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#A2C747",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar!"}).then(n=>{n.isConfirmed&&this.serviceWarehouse.removeWarehouseProduct(t).subscribe(r=>{m().fire({title:"Eliminado!",text:"El producto fue eliminado correctamente!",icon:"success",confirmButtonColor:"#A2C747",showConfirmButton:!1,timer:2e3}),this.dialogRef.close(!0),this.form.reset()})})}save(){if(this.activeAlert=!1,this.isValidData){let i=this.form.value;i.SuggestPriceShopping=parseFloat(this.form.get("SuggestPriceShopping").value),i.SuggestPriceSale=parseFloat(this.form.get("SuggestPriceSale").value);let t=this.listUnitMeasurement.filter(({check:r})=>r);i.unitMeasurementId=t[0].unitMeasurementId,delete i.discount,delete i.avaliable,delete i.count,delete i.subTotal;let n=t[0].warehouseProductId;m().fire({title:"\xbfSeguro en actualizar los precios?",text:"Recuerda que los precios se actualizar\xe1n solo para esta sucursal!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#A2C747",cancelButtonColor:"#d33",confirmButtonText:"S\xed, actualizar!"}).then(r=>{r.isConfirmed&&this.serviceWarehouse.UpdatePriceWarehouseProduct(n,i).subscribe(l=>{m().fire({title:"Actualizado!",text:"los precios fueron actualisados correctamente!",icon:"success"})})}),this.dialogRef.close(i),this.form.reset(),this.activeAlert=!1,this.message=""}else{const i=this.aForm2.nativeElement.count;i&&(i.focus(),this.activeAlert=!0)}}resetPaginator(){this.page=0,this.limit=10}get CurrentPaginator(){return`?Limit=${this.limit}&Page=${this.page}`}keyUpAddStock(){this.amountAvailableFuture=this.amountAvailable+parseFloat(this.formAdd.get("amount").value)}saveAddStock(){this.isValidForm&&alert("Este metodo se esta trabajando en este presiso momento.")}isValidForm(){return Object.keys(this.formAdd.controls).forEach(t=>{this.formAdd.get(t)?.markAsTouched({onlySelf:!0})}),this.formAdd.valid}}M.\u0275fac=function(i){return new(i||M)(e.Y36(u.so),e.Y36(u.WI),e.Y36(d.qu),e.Y36(u.uw),e.Y36(ue.M),e.Y36(g.F0),e.Y36(x.l),e.Y36(e.sBO))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-store-item"]],viewQuery:function(i,t){if(1&i&&(e.Gf(f.NW,5),e.Gf(Be.YE,5),e.Gf(at,5)),2&i){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first),e.iGM(n=e.CRH())&&(t.aForm2=n.first)}},decls:223,vars:145,consts:[[1,"p-6"],[1,"flex","items-center","justify-between","dark:bg-gray-700"],[3,"click"],["aria-hidden","false","aria-label","Example add icon","fontIcon","close"],[3,"selectedTabChange"],["label","Datos"],[1,"content"],[1,"text-lg",2,"font-size","20px !important"],[1,"text-secondary",2,"font-size","12px"],[2,"font-weight","800","padding-right","10px"],[1,"flex","items-center","justify-center"],[2,"width","200px",3,"src"],[1,"flex","items-center","justify-center","mb-2"],[1,"mt-2","mr-2",3,"color","label","icon","withFull","disabled","buttonClick"],[2,"display","ruby"],[3,"title","active","click",4,"ngFor","ngForOf"],[1,"available","mt-1","w-full","px-3","py-1","font-bold"],[1,"mt-2","mb-2"],["ngNativeValidate","","autocomplete","off",3,"formGroup"],["aForm2",""],[1,"grid","sm:grid-cols-4"],[1,"sm:col-span-2"],[1,"w-full",2,"padding","2px",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","name","SuggestPriceShopping",3,"formControlName"],["matInput","","name","SuggestPriceSale",3,"formControlName"],[1,"grid","grid-cols-12","mt-4"],[1,"col-span-4","pr-2"],[1,"flex","flex-col","flex-auto"],[3,"color","label","icon","withFull","disabled","buttonClick"],[1,"col-span-8","pl-2"],["label","Historial"],[1,"text-lg",2,"font-size","15px !important"],[1,"text-lg",2,"font-size","20px !important","font-weight","600"],[1,"body-transfer"],["class","card-history mt-2",4,"ngFor","ngForOf"],["label","Stock"],[1,"text-lg",2,"font-size","15px !important","font-weight","600"],[1,"mb-3","mat-elevation-z0",2,"background","#A2C747","border-radius","15px !important","padding","0px !important"],[3,"collapsedHeight"],[2,"color","#fff !important"],["icon","","aria-hidden","false","aria-label","Example share icon","fontIcon","'input'",1,"mr-2"],[1,"flex"],[2,"background","#f4f4f4","border-radius","10px","padding","20px"],["matInput","","name","amount",3,"formControlName","keyup"],[1,"w-full","pr-3"],[3,"formControlName"],["value","1"],["value","2"],[1,"available-future","mt-1","w-full","px-3","py-1","font-bold"],[1,"mb-3","mat-elevation-z0",2,"background","#b4beca","border-radius","15px !important","padding","0px !important"],["icon","","aria-hidden","false","aria-label","Example share icon","fontIcon","'subdirectory_arrow_left'",1,"mr-2"],["value","3"],[1,"mb-3","mat-elevation-z0",2,"background","#F39C12","border-radius","15px !important","padding","0px !important"],["icon","","aria-hidden","false","aria-label","Example share icon","fontIcon","'update'",1,"mr-2"],["label","Traspasos"],[4,"ngFor","ngForOf"],[3,"title","active","click"],[1,"card-history","mt-2"],[1,"grid","grid-cols-12"],[1,"col-span-6"],[1,"flex","text-right",2,"justify-content","right"],[1,"mr-2"],[1,"color-green",3,"click"],[1,"grid","grid-cols-12","mt-2"],[1,"text-left"],[1,"py-0.5","px-3","rounded-full","text-sm","font-semibold","text-green-800","bg-green-100","dark:text-green-50","dark:bg-green-500"],[1,"py-0.5","px-3","rounded-full","text-sm","font-semibold","text-orange-800","bg-orange-100","dark:text-orange-50","dark:bg-orange-500"],[1,"font-bold","mt-4","mb-2"],[1,"mt-2"],[1,"grid","grid-cols-12","mt-1"],[1,"col-span-3"],[1,"text-center"],[2,"font-weight","600"],[1,"card-movement","mt-2","mb-2"],[1,"item-movement","grid","grid-cols-12"],[1,"col-span-12"],["class","col-span-12",4,"ngIf"],[1,"col-span-2"],["class","p-1 pl-2 pr-2 w-full px-1 rounded-full text-xs text-center font-semibold text-orange-800 bg-orange-100 dark:text-orange-50 dark:bg-orange-500",4,"ngIf"],["class","p-1 pl-2 pr-2 w-full px-1 rounded-full text-xs text-center font-semibold text-green-800 bg-green-100 dark:text-green-50 dark:bg-green-500",4,"ngIf"],[1,"col-span-7"],[1,"col-span-12","mt-2"],[1,"px-6","ml-3",3,"color","label","icon","withFull","disabled","buttonClick"],[3,"class",4,"ngIf"],[1,"p-1","pl-2","pr-2","w-full","px-1","rounded-full","text-xs","text-center","font-semibold","text-orange-800","bg-orange-100","dark:text-orange-50","dark:bg-orange-500"],[1,"p-1","pl-2","pr-2","w-full","px-1","rounded-full","text-xs","text-center","font-semibold","text-green-800","bg-green-100","dark:text-green-50","dark:bg-green-500"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._uU(3," Actualizar Producto "),e.qZA(),e.TgZ(4,"div",2),e.NdJ("click",function(){return t.close()}),e._UZ(5,"mat-icon",3),e.qZA()(),e._UZ(6,"mat-divider"),e.qZA(),e.TgZ(7,"mat-tab-group",4),e.NdJ("selectedTabChange",function(r){return t.selectTab(r)}),e.TgZ(8,"mat-tab",5)(9,"div",6)(10,"div",1)(11,"div")(12,"div")(13,"label",7),e._uU(14),e.ALo(15,"truncate"),e.qZA(),e.TgZ(16,"div",8),e._uU(17),e.ALo(18,"truncate"),e.qZA(),e.TgZ(19,"div",9),e._uU(20),e.qZA()()(),e._UZ(21,"div"),e.qZA(),e.TgZ(22,"div",10),e._UZ(23,"img",11),e.qZA(),e.TgZ(24,"div",12)(25,"btn-actions",13),e.NdJ("buttonClick",function(){return t.gestionaryEquivalences()}),e.qZA()(),e.TgZ(26,"div")(27,"div",14),e.YNc(28,rt,1,2,"chips-info-label",15),e.qZA(),e.TgZ(29,"div",16),e._uU(30),e.ALo(31,"number"),e.qZA(),e._UZ(32,"mat-divider",17),e.qZA(),e.TgZ(33,"form",18,19)(35,"div",20)(36,"div",21)(37,"mat-form-field",22)(38,"mat-label"),e._uU(39,"Compra: "),e.qZA(),e._UZ(40,"mat-icon",23)(41,"input",24),e.qZA()(),e.TgZ(42,"div",21)(43,"mat-form-field",22)(44,"mat-label"),e._uU(45,"Venta:"),e.qZA(),e._UZ(46,"mat-icon",23)(47,"input",25),e.qZA()()(),e.TgZ(48,"div",26)(49,"div",27)(50,"div",28)(51,"btn-generic",29),e.NdJ("buttonClick",function(){return t.removeItem()}),e.qZA()()(),e.TgZ(52,"div",30)(53,"div",28)(54,"btn-generic",29),e.NdJ("buttonClick",function(){return t.save()}),e.qZA()()()()()()(),e.TgZ(55,"mat-tab",31)(56,"label",32),e._uU(57,"Historial de Ingreso"),e.qZA(),e._UZ(58,"br"),e.TgZ(59,"label",33),e._uU(60),e.ALo(61,"truncate"),e.qZA(),e.TgZ(62,"div",34),e.YNc(63,st,55,15,"div",35),e._UZ(64,"br"),e.qZA()(),e.TgZ(65,"mat-tab",36)(66,"label",32),e._uU(67,"Modificar Stock"),e.qZA(),e._UZ(68,"br"),e.TgZ(69,"label",37),e._uU(70),e.ALo(71,"truncate"),e.qZA(),e.TgZ(72,"div",34)(73,"mat-expansion-panel",38)(74,"mat-expansion-panel-header",39)(75,"mat-panel-title",40),e._UZ(76,"mat-icon",41),e._uU(77),e.ALo(78,"truncate"),e.qZA()(),e.TgZ(79,"div",42)(80,"form",18)(81,"div",43)(82,"div",14),e.YNc(83,lt,1,2,"chips-info-label",15),e.qZA(),e.TgZ(84,"div",16),e._uU(85),e.ALo(86,"number"),e.qZA(),e._UZ(87,"mat-divider",17),e.TgZ(88,"mat-form-field",22)(89,"mat-label"),e._uU(90),e.qZA(),e._UZ(91,"mat-icon",23),e.TgZ(92,"input",44),e.NdJ("keyup",function(){return t.keyUpAddStock()}),e.qZA()(),e.TgZ(93,"mat-form-field",22)(94,"mat-label"),e._uU(95),e.qZA(),e._UZ(96,"mat-icon",23),e.TgZ(97,"input",44),e.NdJ("keyup",function(){return t.keyUpAddStock()}),e.qZA()(),e.TgZ(98,"mat-form-field",45)(99,"mat-label"),e._uU(100,"Motivo"),e.qZA(),e.TgZ(101,"mat-select",46)(102,"mat-option",47),e._uU(103,"Re Ajuste"),e.qZA(),e.TgZ(104,"mat-option",48),e._uU(105,"Aumento "),e.qZA()()(),e._UZ(106,"mat-divider",17),e.TgZ(107,"div",49),e._uU(108),e.ALo(109,"number"),e.qZA(),e._UZ(110,"mat-divider",17),e.TgZ(111,"div")(112,"p")(113,"strong"),e._uU(114,"Nota:"),e.qZA(),e._uU(115," Recuerda que al agregar desde aqu\xed, se generar\xe1 una alerta."),e.qZA()(),e.TgZ(116,"btn-generic",29),e.NdJ("buttonClick",function(){return t.saveAddStock()}),e.qZA()()()()(),e.TgZ(117,"mat-expansion-panel",50)(118,"mat-expansion-panel-header",39)(119,"mat-panel-title",40),e._UZ(120,"mat-icon",51),e._uU(121),e.ALo(122,"truncate"),e.qZA()(),e.TgZ(123,"div",42)(124,"form",18)(125,"div",43)(126,"div",14),e.YNc(127,ct,1,2,"chips-info-label",15),e.qZA(),e.TgZ(128,"div",16),e._uU(129),e.ALo(130,"number"),e.qZA(),e._UZ(131,"mat-divider",17),e.TgZ(132,"mat-form-field",22)(133,"mat-label"),e._uU(134),e.qZA(),e._UZ(135,"mat-icon",23),e.TgZ(136,"input",44),e.NdJ("keyup",function(){return t.keyUpAddStock()}),e.qZA()(),e.TgZ(137,"mat-form-field",22)(138,"mat-label"),e._uU(139),e.qZA(),e._UZ(140,"mat-icon",23),e.TgZ(141,"input",44),e.NdJ("keyup",function(){return t.keyUpAddStock()}),e.qZA()(),e.TgZ(142,"mat-form-field",45)(143,"mat-label"),e._uU(144,"Motivo"),e.qZA(),e.TgZ(145,"mat-select",46)(146,"mat-option",47),e._uU(147,"Re Ajuste"),e.qZA(),e.TgZ(148,"mat-option",48),e._uU(149,"Perdida "),e.qZA(),e.TgZ(150,"mat-option",52),e._uU(151,"Vencidos "),e.qZA(),e.TgZ(152,"mat-option",52),e._uU(153,"Faltante "),e.qZA()()(),e._UZ(154,"mat-divider",17),e.TgZ(155,"div",49),e._uU(156),e.ALo(157,"number"),e.qZA(),e._UZ(158,"mat-divider",17),e.TgZ(159,"div")(160,"p")(161,"strong"),e._uU(162,"Nota:"),e.qZA(),e._uU(163," Recuerda que al agregar desde aqu\xed, se generar\xe1 una alerta."),e.qZA()(),e.TgZ(164,"btn-generic",29),e.NdJ("buttonClick",function(){return t.saveAddStock()}),e.qZA()()()()(),e.TgZ(165,"mat-expansion-panel",53)(166,"mat-expansion-panel-header",39)(167,"mat-panel-title",40),e._UZ(168,"mat-icon",54),e._uU(169),e.ALo(170,"truncate"),e.qZA()(),e.TgZ(171,"div",42)(172,"form",18)(173,"div",43)(174,"div",14),e.YNc(175,ut,1,2,"chips-info-label",15),e.qZA(),e._UZ(176,"mat-divider",17),e.TgZ(177,"mat-form-field",22)(178,"mat-label"),e._uU(179),e.qZA(),e._UZ(180,"mat-icon",23),e.TgZ(181,"input",44),e.NdJ("keyup",function(){return t.keyUpAddStock()}),e.qZA()(),e.TgZ(182,"mat-form-field",22)(183,"mat-label"),e._uU(184),e.qZA(),e._UZ(185,"mat-icon",23),e.TgZ(186,"input",44),e.NdJ("keyup",function(){return t.keyUpAddStock()}),e.qZA()(),e.TgZ(187,"mat-form-field",45)(188,"mat-label"),e._uU(189,"Motivo"),e.qZA(),e.TgZ(190,"mat-select",46)(191,"mat-option",47),e._uU(192,"Re Ajuste"),e.qZA(),e.TgZ(193,"mat-option",48),e._uU(194,"Perdida "),e.qZA(),e.TgZ(195,"mat-option",52),e._uU(196,"Vencidos "),e.qZA(),e.TgZ(197,"mat-option",52),e._uU(198,"Faltante "),e.qZA()()(),e._UZ(199,"mat-divider",17),e.TgZ(200,"div",49),e._uU(201),e.ALo(202,"number"),e.qZA(),e._UZ(203,"mat-divider",17),e.TgZ(204,"div")(205,"p")(206,"strong"),e._uU(207,"Nota:"),e.qZA(),e._uU(208," Recuerda que al agregar desde aqu\xed, se generar\xe1 una alerta."),e.qZA()(),e.TgZ(209,"btn-generic",29),e.NdJ("buttonClick",function(){return t.saveAddStock()}),e.qZA()()()()()()(),e.TgZ(210,"mat-tab",55)(211,"div",1)(212,"div")(213,"label",32),e._uU(214,"Historial de Traspasos"),e.qZA(),e._UZ(215,"br"),e.TgZ(216,"label",33),e._uU(217),e.ALo(218,"truncate"),e.qZA()(),e.TgZ(219,"div")(220,"btn-generic",29),e.NdJ("buttonClick",function(){return t.movementItem()}),e.qZA()()(),e.TgZ(221,"div",34),e.YNc(222,Zt,47,25,"div",56),e.qZA()()()),2&i&&(e.xp6(14),e.Oqu(e.xi3(15,103,null==t.product||null==t.product.product?null:t.product.product.name,25)),e.xp6(3),e.Oqu(e.xi3(18,106,null==t.product||null==t.product.product?null:t.product.product.description,25)),e.xp6(3),e.hij(" cod:",null==t.product||null==t.product.product?null:t.product.product.id," "),e.xp6(3),e.MGl("src","data:image/png;base64,",t.product.product.picture,"",e.LSH),e.xp6(2),e.Q6J("color","orange")("label","Precios & Equivalencias")("icon","tune")("withFull",!1)("disabled",!1),e.xp6(3),e.Q6J("ngForOf",t.listUnitMeasurement),e.xp6(2),e.AsE(" Disponible: ",e.xi3(31,109,t.amountAvailable,"1.0-2")," ",t.labelUnitMeasurement," "),e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(1),e.Q6J("formControlName","SuggestPriceShopping"),e.xp6(2),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:currency-dollar"),e.xp6(1),e.Q6J("formControlName","SuggestPriceSale"),e.xp6(4),e.Q6J("color","red")("label","Eliminar")("icon","remove")("withFull",!0)("disabled",!1),e.xp6(3),e.Q6J("color","green")("label","Actualizar")("icon","update")("withFull",!0)("disabled",!1),e.xp6(6),e.Oqu(e.xi3(61,112,null==t.product||null==t.product.product?null:t.product.product.name,20)),e.xp6(3),e.Q6J("ngForOf",t.listHistory),e.xp6(7),e.Oqu(e.xi3(71,115,null==t.product||null==t.product.product?null:t.product.product.name,20)),e.xp6(4),e.Q6J("collapsedHeight","56px"),e.xp6(3),e.hij(" Agregar cantidad de ",e.xi3(78,118,null==t.product||null==t.product.product?null:t.product.product.name,20),"? "),e.xp6(3),e.Q6J("formGroup",t.formAdd),e.xp6(3),e.Q6J("ngForOf",t.listUnitMeasurement),e.xp6(2),e.AsE(" Stock Actual: ",e.xi3(86,121,t.amountAvailable,"1.0-2")," ",t.labelUnitMeasurement," "),e.xp6(3),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij("Aumentar en ",t.labelUnitMeasurement,": "),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(1),e.Q6J("formControlName","amount"),e.xp6(1),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij("Precio en ",t.labelUnitMeasurement,": "),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(1),e.Q6J("formControlName","price"),e.xp6(4),e.Q6J("formControlName","motiveId"),e.xp6(7),e.AsE(" Stock Futuro: ",e.xi3(109,124,t.amountAvailableFuture,"1.0-2")," ",t.labelUnitMeasurement," "),e.xp6(8),e.Q6J("color","green")("label","Aumentar")("icon","update")("withFull",!0)("disabled",!1),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(3),e.hij(" Quitar cantidad de ",e.xi3(122,127,null==t.product||null==t.product.product?null:t.product.product.name,20),"? "),e.xp6(3),e.Q6J("formGroup",t.formAdd),e.xp6(3),e.Q6J("ngForOf",t.listUnitMeasurement),e.xp6(2),e.AsE(" Stock Actual: ",e.xi3(130,130,t.amountAvailable,"1.0-2")," ",t.labelUnitMeasurement," "),e.xp6(3),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij("Quitar en ",t.labelUnitMeasurement,": "),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(1),e.Q6J("formControlName","amount"),e.xp6(1),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij("Precio en ",t.labelUnitMeasurement,": "),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(1),e.Q6J("formControlName","price"),e.xp6(4),e.Q6J("formControlName","motiveId"),e.xp6(11),e.AsE(" Stock Futuro: ",e.xi3(157,133,t.amountAvailableFuture,"1.0-2")," ",t.labelUnitMeasurement," "),e.xp6(8),e.Q6J("color","green")("label","Aumentar")("icon","update")("withFull",!0)("disabled",!1),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(3),e.hij(" Resetear cantidad de ",e.xi3(170,136,null==t.product||null==t.product.product?null:t.product.product.name,20),"? "),e.xp6(3),e.Q6J("formGroup",t.formAdd),e.xp6(3),e.Q6J("ngForOf",t.listUnitMeasurement),e.xp6(2),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij("Aumentar en ",t.labelUnitMeasurement,": "),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(1),e.Q6J("formControlName","amount"),e.xp6(1),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij("Precio en ",t.labelUnitMeasurement,": "),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(1),e.Q6J("formControlName","price"),e.xp6(4),e.Q6J("formControlName","motiveId"),e.xp6(11),e.AsE(" Stock Futuro: ",e.xi3(202,139,t.amountAvailableFuture,"1.0-2")," ",t.labelUnitMeasurement," "),e.xp6(8),e.Q6J("color","green")("label","Aumentar")("icon","update")("withFull",!0)("disabled",!1),e.xp6(8),e.Oqu(e.xi3(218,142,null==t.product||null==t.product.product?null:t.product.product.name,20)),e.xp6(3),e.Q6J("color","green")("label","Traspasar")("icon","filter_list")("withFull",!0)("disabled",!1),e.xp6(2),e.Q6J("ngForOf",t.listWarehouseMovement))},dependencies:[p.sg,p.O5,d.Fj,d.JJ,d.JL,C.Hw,d.sg,d.u,v.KE,v.hX,v.qo,P.Nt,O.gD,J.ey,w.d,de.uX,de.SP,ne.ib,ne.yz,ne.yK,y.e,ce.h,K.P,p.JJ,ae.E,oe.L,X.W],styles:[".btn-add[_ngcontent-%COMP%]{background:#5FB960;color:#fff;width:100%;height:40px;text-align:center;align-items:center;place-content:center}.alert[_ngcontent-%COMP%]{color:red}.box[_ngcontent-%COMP%]{width:100%;height:25px}.body-transfer[_ngcontent-%COMP%]{min-width:300px;min-height:400px;max-width:500px;max-height:500px}.card-history[_ngcontent-%COMP%]{background:#f4f6f7!important;box-shadow:0 4px 6px #0003;padding:12px;border-radius:10px}.text-right[_ngcontent-%COMP%]{text-align:right!important}.text-left[_ngcontent-%COMP%]{text-align:left!important}.parpadea[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_parpadeo;animation-duration:.9s;animation-timing-function:linear;animation-iteration-count:3;-webkit-animation-name:_ngcontent-%COMP%_parpadeo;-webkit-animation-duration:.9s;-webkit-animation-timing-function:linear;-webkit-animation-iteration-count:3}@keyframes _ngcontent-%COMP%_parpadeo{0%{opacity:1}50%{opacity:0}to{opacity:1}}.available[_ngcontent-%COMP%]{background:#A2C747;color:#fff;height:46px;font-size:20px;display:flex;justify-content:space-around;place-items:center;border-radius:10px}.available-future[_ngcontent-%COMP%]{background:#F39C12;color:#fff;height:46px;font-size:20px;display:flex;justify-content:space-around;place-items:center;border-radius:10px}.color-green[_ngcontent-%COMP%]{color:#a2c747!important;cursor:pointer}.card-movement[_ngcontent-%COMP%]{background:#f4f6f7!important;padding:10px;border-radius:10px}"]});var I=s(7376),pe=s(8181),he=s(455);function Ct(o,i){if(1&o&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}class F{constructor(i,t,n,r){this.fb=i,this.serviceWarehouse=t,this.serviceProduct=n,this.service=r,this.listCategory=[],this.change=new e.vpe,this.form=this.fb.group({name:[null],categoryId:[null],moreFew:[!1]}),this.setListCategory()}setListCategory(){this.service.getAllProductCategory().subscribe(i=>{this.listCategory=i})}control(i){return this.form.controls[i]}save(){const i=this.form.value;i.moreFew=i.moreFew?i.moreFew:null;let t="&";null!=i.name&&(t+=(t.length>1?"&":"")+"Name="+i.name),null!=i.categoryId&&(t+=(t.length>1?"&":"")+"CategoryId="+i.categoryId),null!=i.moreFew&&(t+=(t.length>1?"&":"")+"ButFew="+i.moreFew),this.change.emit(t)}clean(){this.form.get("name").setValue(null),this.form.get("categoryId").setValue(null),this.form.get("moreFew").setValue(null),this.change.emit("")}}function Tt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"filter-item",27),e.NdJ("emitQuery",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.senfilter(r))}),e.qZA()()}}function wt(o,i){1&o&&(e.TgZ(0,"div",28)(1,"div",29),e._UZ(2,"img",30),e.qZA()())}function yt(o,i){1&o&&(e.TgZ(0,"mat-icon",43),e._uU(1,"warning"),e.qZA())}function At(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectProduct(l))}),e.TgZ(1,"div",32)(2,"div",33)(3,"div")(4,"div",34),e._uU(5),e.ALo(6,"number"),e.qZA(),e.TgZ(7,"div",35),e._uU(8),e.qZA()(),e.TgZ(9,"div"),e.YNc(10,yt,2,0,"mat-icon",36),e.qZA()(),e.TgZ(11,"div",37),e._uU(12),e.qZA()(),e.TgZ(13,"div",21),e._UZ(14,"img",38),e.qZA(),e.TgZ(15,"div",39)(16,"div",40),e._uU(17),e.ALo(18,"truncate"),e.qZA(),e.TgZ(19,"div",41),e._uU(20),e.ALo(21,"truncate"),e.qZA()(),e._UZ(22,"div",42),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw();e.xp6(5),e.hij(" Cantidad : ",e.xi3(6,7,null==t?null:t.amount,"1.0-2")," "),e.xp6(3),e.hij(" ",null==t||null==t.unitMeasurement?null:t.unitMeasurement.name," "),e.xp6(2),e.Q6J("ngIf",(null==t?null:t.amount)<=5),e.xp6(2),e.hij(" cod:",null==t||null==t.product?null:t.product.id," "),e.xp6(2),e.Q6J("src",null!=t.product&&t.product.picture?"data:image/png;base64,"+t.product.picture:n.imageSource,e.LSH),e.xp6(3),e.Oqu(e.xi3(18,10,null==t||null==t.product?null:t.product.name,40)),e.xp6(3),e.Oqu(e.xi3(21,13,null==t||null==t.product?null:t.product.description,40))}}F.\u0275fac=function(i){return new(i||F)(e.Y36(d.qu),e.Y36(x.l),e.Y36(ue.M),e.Y36(pe.e))},F.\u0275cmp=e.Xpm({type:F,selectors:[["filter-item"]],outputs:{change:"emitQuery"},decls:14,vars:15,consts:[[1,"example-full-width","w-60","mr-3"],["matInput","","placeholder","Buscar por nombre..","value","Buscar por Nombre..",3,"formControl"],[1,"w-50","mr-3"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"w-50","mr-3",3,"color","formControl"],[1,"px-6","ml-3",3,"color","label","icon","withFull","disabled","buttonClick"],[3,"value"]],template:function(i,t){1&i&&(e.TgZ(0,"div")(1,"mat-form-field",0)(2,"mat-label"),e._uU(3,"Nombre"),e.qZA(),e._UZ(4,"input",1),e.qZA(),e.TgZ(5,"mat-form-field",2)(6,"mat-label"),e._uU(7,"Categoria"),e.qZA(),e.TgZ(8,"mat-select",3),e.YNc(9,Ct,2,2,"mat-option",4),e.qZA()(),e.TgZ(10,"mat-slide-toggle",5),e._uU(11," Filtrar Pocos "),e.qZA(),e.TgZ(12,"btn-generic",6),e.NdJ("buttonClick",function(){return t.save()}),e.qZA(),e.TgZ(13,"btn-generic",6),e.NdJ("buttonClick",function(){return t.clean()}),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("formControl",t.control("name")),e.xp6(4),e.Q6J("formControl",t.control("categoryId")),e.xp6(1),e.Q6J("ngForOf",t.listCategory),e.xp6(1),e.Q6J("color","primary")("formControl",t.control("moreFew")),e.xp6(2),e.Q6J("color","green")("label","Filtrar")("icon","filter_list")("withFull",!1)("disabled",!1),e.xp6(1),e.Q6J("color","secondary")("label","Limpiar")("icon","clear_all")("withFull",!1)("disabled",!1))},dependencies:[p.sg,d.Fj,d.JJ,d.oH,v.KE,v.hX,P.Nt,O.gD,J.ey,he.Rr,y.e]});class E{constructor(i,t,n,r,l,c){this.service=i,this.activatedRoute=t,this.dialog=n,this.sanitizer=r,this.router=l,this.fb=c,this.myControl=new d.NI(""),this.imageSource=this.sanitizer.bypassSecurityTrustResourceUrl(_.B),this.options=[],this.totalDinner=0,this.productList=[],this.productListSelect=[],this.filter={name:""},this.queryFilter="",this.page=0,this.limit=18,this.listOptionsPage=[5,10,20,50,100,500,1e3],this.objComplete=null,this.totalLength=400,this.isFilterVisible=!1,this.filter2={name:""},this.form=this.fb.group({id:[null],price:[null],count:[null],discount:[null],subTotal:[null],search:[""]})}ngOnInit(){this.imageSource=this.sanitizer.bypassSecurityTrustResourceUrl(_.B),this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.getProductByWarehouseId(this.warehouseId,this.CurrentPaginator).subscribe(i=>{this.productList=i.listProducts,this.objComplete=i,this.totalLength=i.total,this.productList.map(t=>{null===t?.product?.picture&&(t.product.picture=te.k)})})}get CurrentPaginator(){return`?Limit=${this.limit}&Page=${this.page}`}pageEvent(i){this.limit=i.pageSize,this.page=i.pageIndex,this.service.getProductByWarehouseId(this.warehouseId,this.CurrentPaginator+this.queryFilter).subscribe(t=>{this.productList=t.listProducts,this.objComplete=t,this.totalLength=t.total})}toggleFilter(){this.isFilterVisible=!this.isFilterVisible}addProductForWareouse(){this.router.navigate([`warehouse/warehouse/${this.warehouseId}/warehouse-adjustments`])}senfilter(i){this.limit=18,this.page=0,this.queryString=this.CurrentPaginator+i,this.service.getProductByWarehouseId(this.warehouseId,this.queryString).subscribe(t=>{this.productList=t.listProducts,this.objComplete=t,this.totalLength=t.total,this.queryFilter=i})}selectProduct(i){this.validateSelectProduct(i.id).length>0?m().fire({icon:"error",title:"Oops...",text:"Ya existe este producto en la lista!"}):this.dialog.open(M,{data:{data:i,isNew:true},maxHeight:"90vh",maxWidth:"430px",disableClose:!0}).afterClosed().subscribe(l=>{let c=l;c?.price&&c.count&&c?.subTotal&&(this.productList.map(Z=>{Z.id==i.id&&(Z.check=!0)}),this.changeProductList(c,true)),l&&this.ngOnInit()})}changeProductList(i,t){this.validateSelectProduct(i.id).length>0&&t?m().fire({icon:"error",title:"Oops...",text:"Ya existe este producto en la lista!"}):t?(this.productListSelect.push(i),this.reloadValueTotal()):(this.productListSelect.map(r=>{r.id==i.id&&(r.count=i.count,r.discount=i.discount,r.price=i.price,r.subTotal=i.subTotal)}),this.reloadValueTotal())}reloadValueTotal(){let i=0;this.productListSelect.map(t=>{i+=t.subTotal}),this.totalDinner=i,this.form.get("search").setValue("")}updateSelect(i){this.dialog.open(ee.N,{data:{data:i,isNew:!1}}).afterClosed().subscribe(r=>{let l=r;this.productList.map(c=>{c.id==i.id&&(c.check=!0)}),this.changeProductList(l,!1)})}validateSelectProduct(i){return this.productListSelect.filter(t=>t.id==i)}_filter(i){const t=i.toLowerCase();return this.options.filter(n=>n.firstName.toLowerCase().includes(t))}get busqueda(){return{name:this.form.get("search").value,description:this.form.get("search").value}}getByFilterLocal(i){this.filter2=i}removeItem(i){m().fire({title:"Seguro que quiere quitar?",text:"Una ves quitado, no se revertira!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar!"}).then(t=>{t.isConfirmed&&(this.productListSelect=this.productListSelect.filter(n=>n.id!==i.id),this.productList.map(n=>{n.id==i.id&&(n.check=!1)}),this.reloadValueTotal(),m().fire("Eliminado!","Ese producto no pertenece a la lista de tu compra","success"))})}cancelStore(){m().fire({title:"Seguro que quiere cancelar?",text:"Una cancelado ya se perder\xe1 lo seleccionado!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, Cancelar!"}).then(i=>{i.isConfirmed&&(this.reloadValueTotal(),m().fire("Cancelado!","La nota de venta ah sido cancelada!","success"),this.router.navigate(["sale"]))})}gestionaryTransfer(){null!=this.queryString?(this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.generateReportingExcelProductById(this.warehouseId,this.queryString).subscribe(i=>{const t=URL.createObjectURL(i);window.open(t,"_blank"),setTimeout(()=>{URL.revokeObjectURL(t)},100)},i=>{console.error("Error al descargar el Excel:",i)})):(this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.generateReportingExcelProductById(this.warehouseId,this.CurrentPaginator).subscribe(i=>{const t=URL.createObjectURL(i);window.open(t,"_blank"),setTimeout(()=>{URL.revokeObjectURL(t)},100)},i=>{console.error("Error al descargar el Excel:",i)}))}gestionaryMovement(){this.router.navigate([`warehouse/warehouse/${this.warehouseId}/movement`])}previewStore(){this.dialog.open(ie.l,{autoFocus:!1,maxHeight:"90vh",data:{detailProduct:this.productListSelect,total:this.totalDinner,form:this.form.value}}).afterClosed().subscribe(n=>{})}}E.\u0275fac=function(i){return new(i||E)(e.Y36(x.l),e.Y36(g.gz),e.Y36(u.uw),e.Y36(b.H7),e.Y36(g.F0),e.Y36(d.qu))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-item-gestionary"]],decls:46,vars:30,consts:[[1,"base-content"],[1,"contenido"],[1,"grid","grid-cols-1","sm:grid-cols-12","w-full","h-full","min-w-0"],[1,"sm:col-span-12","lg:col-span-12",2,"overflow","hidden"],[1,"w-full","pl-2","pr-2"],[1,"grid","grid-cols-1","sm:grid-cols-12","gap-6","w-full","min-w-0"],[1,"sm:col-span-4","lg:col-span-3"],[1,"flex","flex-col","flex-auto"],[1,"w-full"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],[1,"sm:col-span-8","lg:col-span-9"],[1,"",2,"display","flex","justify-content","right","justify-content","right","align-items","flex-end"],[1,"flex","pb-2",2,"overflow-y","hidden"],[1,"w-full","sm:w-auto","mr-2",3,"color","label","icon","withFull","disabled","buttonClick"],[1,"flex","items-center","justify-between","mt-2",2,"color","#a2c747 !important"],[1,"flex","items-center",3,"click"],[2,"color","#a2c747 !important"],[1,"ml-2","font-bold","text-black",2,"color","#a2c747 !important"],[4,"ngIf"],[1,"mt-2"],[1,"flex","items-center","justify-center"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length","pageIndex","pageSize","page"],["style","height: 50% !important; width: 100% !important; ",4,"ngIf"],["itemSize","100",1,"example-viewport","h-full"],[1,"grid","grid-cols-1","sm:grid-cols-12","w-full","h-full"],["class","sm:col-span-6 xs:col-span-12  md:col-span-3   lg:col-span-2\n                                     flex flex-col flex-auto p-0 bg-card shadow rounded overflow-hidden p-1 m-1","style","background: #fff !important;",3,"click",4,"ngFor","ngForOf"],[1,"mb-1","mt-1",3,"emitQuery"],[2,"height","50% !important","width","100% !important"],[2,"display","flex","justify-content","center","align-items","center","height","100%"],["src","assets/images/ui/empty_cart_icon.svg","alt","Empty cart icon",2,"width","260px"],[1,"sm:col-span-6","xs:col-span-12","md:col-span-3","lg:col-span-2","flex","flex-col","flex-auto","p-0","bg-card","shadow","rounded","overflow-hidden","p-1","m-1",2,"background","#fff !important",3,"click"],[1,"p-2"],[1,"flex","justify-between"],[1,"py-0.5","px-3","rounded-full","text-sm","font-semibold","text-blue-800","bg-blue-100","dark:text-blue-50","dark:bg-blue-500"],[1,"py-0.5","px-3","mt-1","rounded-full","w-min","text-sm","font-semibold","text-orange-800","bg-orange-100","dark:text-orange-50","dark:bg-orange-500"],["style","height: 15px; color: #F5B041;",4,"ngIf"],[1,"ml-2",2,"font-weight","600","padding-right","10px"],[2,"max-width","8em","max-height","170px",3,"src"],[1,"text-center","mt-1","mb-1","h-full"],[1,"product-name"],[1,"product-description"],[1,"text-center",2,"background","#D5D8DC"],[2,"height","15px","color","#F5B041"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e._uU(10,"Listado de productos"),e.qZA(),e.TgZ(11,"div",10),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"btn-actions",14),e.NdJ("buttonClick",function(){return t.addProductForWareouse()}),e.qZA(),e.TgZ(17,"btn-actions",14),e.NdJ("buttonClick",function(){return t.gestionaryTransfer()}),e.qZA(),e.TgZ(18,"btn-actions",14),e.NdJ("buttonClick",function(){return t.gestionaryTransfer()}),e.qZA(),e.TgZ(19,"btn-actions",14),e.NdJ("buttonClick",function(){return t.gestionaryMovement()}),e.qZA()()()()()(),e.TgZ(20,"div",15)(21,"button",16),e.NdJ("click",function(){return t.toggleFilter()}),e.TgZ(22,"mat-icon",17),e._uU(23),e.qZA(),e.TgZ(24,"span",18),e._uU(25),e.qZA()()(),e.YNc(26,Tt,2,0,"div",19),e._UZ(27,"mat-divider",20),e.TgZ(28,"div",21)(29,"mat-paginator",22),e.NdJ("page",function(r){return t.pageEvent(r)}),e.qZA()(),e._UZ(30,"mat-divider"),e.YNc(31,wt,3,0,"div",23),e.TgZ(32,"cdk-virtual-scroll-viewport",24)(33,"div",25),e.YNc(34,At,23,16,"div",26),e.qZA(),e._UZ(35,"br")(36,"br")(37,"br")(38,"br")(39,"br")(40,"br")(41,"br")(42,"br")(43,"br")(44,"br")(45,"br"),e.qZA()()()()()),2&i&&(e.xp6(12),e.hij("Gestion de productos del almacen ",t.warehouseId,""),e.xp6(4),e.Q6J("color","orange")("label","Agregar Productos")("icon","add")("withFull",!0)("disabled",!1),e.xp6(1),e.Q6J("color","green")("label","Solicitudes")("icon","swap_vert")("withFull",!0)("disabled",!1),e.xp6(1),e.Q6J("color","green")("label","Exportar")("icon","cloud_download")("withFull",!0)("disabled",!1),e.xp6(1),e.Q6J("color","green")("label","Movimientos")("icon","move_to_inbox")("withFull",!0)("disabled",!1),e.xp6(4),e.Oqu(t.isFilterVisible?"visibility_off":"visibility"),e.xp6(2),e.Oqu(t.isFilterVisible?"Ocultar filtros":"Mostrar filtros"),e.xp6(1),e.Q6J("ngIf",t.isFilterVisible),e.xp6(3),e.Q6J("pageSizeOptions",t.listOptionsPage)("length",t.totalLength)("pageIndex",t.page)("pageSize",t.limit),e.xp6(2),e.Q6J("ngIf",0==t.productList.length),e.xp6(3),e.Q6J("ngForOf",t.productList))},dependencies:[p.sg,p.O5,C.Hw,w.d,f.NW,I.N7,I.xd,K.P,F,p.JJ,X.W],styles:[".icon[_ngcontent-%COMP%]{margin:0 10px;color:#000;font-weight:900}.contenido[_ngcontent-%COMP%]{padding:10px;width:100%;height:100%;border-radius:5px;overflow-y:scroll;background:#ffffff;transition:all .3s ease-in-out;box-shadow:0 0 25px #0000001a}.base-content[_ngcontent-%COMP%]{padding:8px;width:100%}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.itemSelect[_ngcontent-%COMP%]{border:1px solid #f4f4f4;border-radius:2px;padding:5px 10px;margin:2px}.datos[_ngcontent-%COMP%]{padding-left:10px}.itemSelect[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.example-viewport[_ngcontent-%COMP%]{width:100%!important}.product-name[_ngcontent-%COMP%]{font-size:13px;font-weight:700}.product-description[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}"]});var Ut=s(1014);function qt(o,i){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}class Q{get formLabel(){return this.isCreate?"Reg\xedstro":"Actualizaci\xf3n"}constructor(i,t,n,r){this.activatedRoute=i,this.fb=t,this.router=n,this.service=r,this.id=null,this.isCreate=!1,this.isSaving=!1,this.listType=[{id:1,name:"Fisico"},{id:2,name:"Movil"}],this.prop=["id","name","description","code","location","warehouseTypeId"],this.form=this.fb.group({id:[null],name:[null,[d.kI.required,d.kI.minLength(3)]],description:[null,[d.kI.required,d.kI.minLength(3)]],code:[null,[d.kI.required,d.kI.minLength(3)]],location:[null],warehouseTypeId:[1,null]})}ngOnInit(){this.isCreate=this.router.url.endsWith("/store"),this.isCreate||(this.id=parseInt(this.activatedRoute.snapshot.params.id),this.service.getById(this.id).subscribe(i=>{this.prop.forEach(t=>this.form.get(t)?.setValue(i[t]))}))}control(i){return this.form.controls[i]}save(){let i=this.form.value;i.id=this.id;let t=this.isCreate?"Registro":"Actualizaci\xf3n";this.isValidForm()&&(this.isSaving=!0,this.service.store(i).subscribe(n=>{m().fire({position:"top-end",icon:"success",title:"Su "+t+"se realizo con exito!",showConfirmButton:!1,timer:1500}),localStorage.removeItem("warehouseDefault"),this.router.navigate(["warehouse/warehouse"])}))}isValidForm(){return Object.keys(this.form.controls).forEach(t=>{this.form.get(t)?.markAsTouched({onlySelf:!0})}),this.form.valid}cancelStore(){this.router.navigate(["warehouse/warehouse"])}}Q.\u0275fac=function(i){return new(i||Q)(e.Y36(g.gz),e.Y36(d.qu),e.Y36(g.F0),e.Y36(x.l))},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["app-store-warehouse"]],decls:34,vars:41,consts:[[1,"contenido"],[1,"pd-20","card-box","mb-30"],[1,""],[1,"w-full","mt-4"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],["ngNativeValidate","","autocomplete","off",3,"formGroup"],[1,"grid","sm:grid-cols-4","gap-6","w-full","mt-8"],[1,"sm:col-span-2"],[3,"formControl","label","maxLength","minLength","icon","disabled","placeholder"],[1,"w-full"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","dark:bg-gray-700"],[1,"px-6","ml-3",3,"color","label","icon","withFull","disabled","buttonClick"],[3,"value"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",2)(4,"div",3)(5,"div",4),e._uU(6,"Getion de sucursal"),e.qZA(),e.TgZ(7,"div",5),e._uU(8,"Modulo de gestiones para sucursal"),e.qZA()(),e._UZ(9,"br")(10,"hr"),e.TgZ(11,"form",6)(12,"div",7)(13,"div",8),e._UZ(14,"input-text",9),e.qZA(),e.TgZ(15,"div",8),e._UZ(16,"input-text",9),e.qZA()(),e.TgZ(17,"div",7)(18,"div",8),e._UZ(19,"input-text",9),e.qZA(),e.TgZ(20,"div",8),e._UZ(21,"input-text",9),e.qZA()(),e.TgZ(22,"div",7)(23,"div",8)(24,"mat-form-field",10)(25,"mat-label"),e._uU(26,"Tipo"),e.qZA(),e.TgZ(27,"mat-select",11),e.YNc(28,qt,2,2,"mat-option",12),e.qZA()()()(),e.TgZ(29,"div",13),e._UZ(30,"div"),e.TgZ(31,"div")(32,"btn-generic",14),e.NdJ("buttonClick",function(){return t.cancelStore()}),e.qZA(),e.TgZ(33,"btn-generic",14),e.NdJ("buttonClick",function(){return t.save()}),e.qZA()()()()()()()()),2&i&&(e.xp6(11),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("formControl",t.control("name"))("label","Nombre:")("maxLength",45)("minLength",3)("icon","heroicons_outline:library")("disabled",!1)("placeholder","Nombre."),e.xp6(2),e.Q6J("formControl",t.control("description"))("label","Descripci\xf3n:")("maxLength",50)("minLength",3)("icon","heroicons_outline:document-text")("disabled",!1)("placeholder","Descripci\xf3n."),e.xp6(3),e.Q6J("formControl",t.control("code"))("label","Codigo:")("maxLength",30)("minLength",3)("icon","heroicons_outline:qrcode")("disabled",!1)("placeholder","Codigo."),e.xp6(2),e.Q6J("formControl",t.control("location"))("label","Ubicaci\xf3n:")("maxLength",100)("minLength",3)("icon","heroicons_outline:location-marker")("disabled",!1)("placeholder","Ubicaci\xf3n."),e.xp6(6),e.Q6J("formControlName","warehouseTypeId"),e.xp6(1),e.Q6J("ngForOf",t.listType),e.xp6(4),e.Q6J("color","secondary")("label"," Cancelar")("icon","close")("withFull",!1)("disabled",!1),e.xp6(1),e.Q6J("color","green")("label"," Guardar")("icon","save")("withFull",!1)("disabled",t.isSaving))},dependencies:[p.sg,d.JJ,d.JL,d.oH,d.sg,d.u,v.KE,v.hX,O.gD,J.ey,Ut.m,y.e],styles:[".icon[_ngcontent-%COMP%]{margin:0 10px;color:#000;font-weight:900}.contenido[_ngcontent-%COMP%]{width:100%;padding:20px;margin:8px;border-radius:5px;background:#fff;transition:all .3s ease-in-out;box-shadow:0 0 25px #0000001a}"]});class Y{constructor(i,t){this.dialogRef=i,this.viewMovements=!1,this.pettyCashId=t,this.setValuesDefaul()}setValuesDefaul(){}selectTab(i){this.viewMovements=1===i.index}close(){this.dialogRef.close(!0)}}function It(o,i){1&o&&(e.TgZ(0,"th",20),e._uU(1," No. "),e.qZA())}function kt(o,i){if(1&o&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.id," ")}}function Mt(o,i){1&o&&(e.TgZ(0,"th",20),e._uU(1," Fecha de Solicitud "),e.qZA())}function Pt(o,i){if(1&o&&(e.TgZ(0,"td",21),e._uU(1),e.ALo(2,"dateFormatHours"),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.movementDateRequest)," ")}}function St(o,i){1&o&&(e.TgZ(0,"th",20),e._uU(1," Nota "),e.qZA())}function Ot(o,i){if(1&o&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.noteRequest," ")}}function Jt(o,i){1&o&&(e.TgZ(0,"th",20),e._uU(1," Almacen Origen "),e.qZA())}function Nt(o,i){if(1&o&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.warehouseOriginId," ")}}function Ft(o,i){1&o&&(e.TgZ(0,"th",20),e._uU(1," Usuario "),e.qZA())}function Qt(o,i){if(1&o&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.userRequestId," ")}}function Lt(o,i){1&o&&(e.TgZ(0,"th",20),e._uU(1," Estado "),e.qZA())}function Wt(o,i){1&o&&e._UZ(0,"chips-faam",23),2&o&&e.Q6J("color","green")("label","Activo")}function Rt(o,i){1&o&&e._UZ(0,"chips-faam",23),2&o&&e.Q6J("color","orange")("label","Inactivo")}function Dt(o,i){if(1&o&&(e.TgZ(0,"td",21),e.YNc(1,Wt,1,2,"chips-faam",22),e.YNc(2,Rt,1,2,"chips-faam",22),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(1),e.Q6J("ngIf",!t.isActive)}}function Et(o,i){1&o&&(e.TgZ(0,"th",20),e._uU(1," Estado "),e.qZA())}Y.\u0275fac=function(i){return new(i||Y)(e.Y36(u.so),e.Y36(u.WI))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["app-popup-alert-package"]],decls:169,vars:24,consts:[[1,"preview-sale","p-0","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","justify-between","mb-2"],[1,"w-full","mt-4","ml-6"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],[1,"p-4",3,"click"],["svgIcon","heroicons_outline:x"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-6","w-full","min-w-0","p-2"],[1,"flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex-col","max-w-sm","md:max-w-none","p-1"],[1,"text-2xl","font-bold","tracking-tight","leading-tight"],[1,"mt-2","text-lg","font-medium","tracking-tight","text-secondary"],[1,"w-8","h-1","my-2","rounded","bg-accent"],[1,"flex","items-baseline","whitespace-nowrap"],[1,"mr-2","text-2xl"],[1,"text-3xl","font-semibold","leading-tight","tracking-tight"],["mat-stroked-button","",1,"fuse-mat-button-large","mt-2",3,"color"],[1,"flex","flex-col","mt-1"],[1,"font-semibold"],[1,"mt-4","space-y-2"],[1,"flex"],[1,"icon-size-1","text-green-600",3,"svgIcon"],[1,"ml-2","leading-1"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"div",3),e._uU(5,"Plan Basico"),e.qZA(),e.TgZ(6,"div",4),e._uU(7,"Actual Plan adquirido"),e.qZA()()(),e.TgZ(8,"div",5),e.NdJ("click",function(){return t.close()}),e._UZ(9,"mat-icon",6),e.qZA()(),e._UZ(10,"mat-divider"),e.TgZ(11,"div",7)(12,"div",8)(13,"fuse-card",9)(14,"div",10),e._uU(15,"Basico"),e.qZA(),e.TgZ(16,"div",11),e._uU(17,"Plan Gratuito para todo tipo de negocio"),e.qZA(),e._UZ(18,"div",12),e.TgZ(19,"div",13)(20,"div",14),e._uU(21,"BS."),e.qZA(),e.TgZ(22,"div",15),e.ynx(23),e._uU(24,"0.00"),e.BQk(),e.qZA()(),e.TgZ(25,"button",16),e._uU(26," Plan Actual "),e.qZA(),e.TgZ(27,"div",17)(28,"div",18),e._uU(29,"Detalles del plan, basico:"),e.qZA(),e.TgZ(30,"div",19)(31,"div",20),e._UZ(32,"mat-icon",21),e.TgZ(33,"div",22)(34,"b"),e._uU(35,"1"),e.qZA(),e._uU(36," Caja"),e.qZA()(),e.TgZ(37,"div",20),e._UZ(38,"mat-icon",21),e.TgZ(39,"div",22)(40,"b"),e._uU(41,"1"),e.qZA(),e._uU(42," Sucursal"),e.qZA()(),e.TgZ(43,"div",20),e._UZ(44,"mat-icon",21),e.TgZ(45,"div",22),e._uU(46,"Reportes"),e.qZA()(),e.TgZ(47,"div",20),e._UZ(48,"mat-icon",21),e.TgZ(49,"div",22),e._uU(50,"Inventario"),e.qZA()(),e.TgZ(51,"div",20),e._UZ(52,"mat-icon",21),e.TgZ(53,"div",22),e._uU(54,"Clientes"),e.qZA()(),e.TgZ(55,"div",20),e._UZ(56,"mat-icon",21),e.TgZ(57,"div",22),e._uU(58,"Compras"),e.qZA()(),e.TgZ(59,"div",20),e._UZ(60,"mat-icon",21),e.TgZ(61,"div",22),e._uU(62,"Ventas"),e.qZA()()()()()(),e.TgZ(63,"div",23)(64,"fuse-card",9)(65,"div",10),e._uU(66,"Basico"),e.qZA(),e.TgZ(67,"div",11),e._uU(68,"Plan Gratuito para todo tipo de negocio"),e.qZA(),e._UZ(69,"div",12),e.TgZ(70,"div",13)(71,"div",14),e._uU(72,"BS."),e.qZA(),e.TgZ(73,"div",15),e.ynx(74),e._uU(75,"0.00"),e.BQk(),e.qZA()(),e.TgZ(76,"button",16),e._uU(77," Plan Actual "),e.qZA(),e.TgZ(78,"div",17)(79,"div",18),e._uU(80,"Detalles del plan, basico:"),e.qZA(),e.TgZ(81,"div",19)(82,"div",20),e._UZ(83,"mat-icon",21),e.TgZ(84,"div",22)(85,"b"),e._uU(86,"1"),e.qZA(),e._uU(87," Caja"),e.qZA()(),e.TgZ(88,"div",20),e._UZ(89,"mat-icon",21),e.TgZ(90,"div",22)(91,"b"),e._uU(92,"1"),e.qZA(),e._uU(93," Sucursal"),e.qZA()(),e.TgZ(94,"div",20),e._UZ(95,"mat-icon",21),e.TgZ(96,"div",22),e._uU(97,"Reportes"),e.qZA()(),e.TgZ(98,"div",20),e._UZ(99,"mat-icon",21),e.TgZ(100,"div",22),e._uU(101,"Inventario"),e.qZA()(),e.TgZ(102,"div",20),e._UZ(103,"mat-icon",21),e.TgZ(104,"div",22),e._uU(105,"Clientes"),e.qZA()(),e.TgZ(106,"div",20),e._UZ(107,"mat-icon",21),e.TgZ(108,"div",22),e._uU(109,"Compras"),e.qZA()(),e.TgZ(110,"div",20),e._UZ(111,"mat-icon",21),e.TgZ(112,"div",22),e._uU(113,"Ventas"),e.qZA()()()()()(),e.TgZ(114,"div",23)(115,"fuse-card",9)(116,"div",10),e._uU(117,"Basico"),e.qZA(),e.TgZ(118,"div",11),e._uU(119,"Plan Gratuito para todo tipo de negocio"),e.qZA(),e._UZ(120,"div",12),e.TgZ(121,"div",13)(122,"div",14),e._uU(123,"BS."),e.qZA(),e.TgZ(124,"div",15),e.ynx(125),e._uU(126,"0.00"),e.BQk(),e.qZA()(),e.TgZ(127,"button",16),e._uU(128," Plan Actual "),e.qZA(),e.TgZ(129,"div",17)(130,"div",18),e._uU(131,"Detalles del plan, basico:"),e.qZA(),e.TgZ(132,"div",19)(133,"div",20),e._UZ(134,"mat-icon",21),e.TgZ(135,"div",22)(136,"b"),e._uU(137,"1"),e.qZA(),e._uU(138," Caja"),e.qZA()(),e.TgZ(139,"div",20),e._UZ(140,"mat-icon",21),e.TgZ(141,"div",22)(142,"b"),e._uU(143,"1"),e.qZA(),e._uU(144," Sucursal"),e.qZA()(),e.TgZ(145,"div",20),e._UZ(146,"mat-icon",21),e.TgZ(147,"div",22),e._uU(148,"Reportes"),e.qZA()(),e.TgZ(149,"div",20),e._UZ(150,"mat-icon",21),e.TgZ(151,"div",22),e._uU(152,"Inventario"),e.qZA()(),e.TgZ(153,"div",20),e._UZ(154,"mat-icon",21),e.TgZ(155,"div",22),e._uU(156,"Clientes"),e.qZA()(),e.TgZ(157,"div",20),e._UZ(158,"mat-icon",21),e.TgZ(159,"div",22),e._uU(160,"Compras"),e.qZA()(),e.TgZ(161,"div",20),e._UZ(162,"mat-icon",21),e.TgZ(163,"div",22),e._uU(164,"Ventas"),e.qZA()()()()()()(),e._UZ(165,"br")(166,"br"),e.TgZ(167,"p"),e._uU(168," Lorem ipsum dolor, sit amet consectetur adipisicing elit. At, vitae natus nam iure sit reiciendis molestiae aliquam! Saepe, placeat illo vero, cumque ut debitis temporibus quibusdam ex rerum consequatur veritatis. "),e.qZA()()),2&i&&(e.xp6(25),e.Q6J("color","primary"),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(16),e.Q6J("color","primary"),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(16),e.Q6J("color","primary"),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:check"))},dependencies:[R.lW,w.d,C.Hw]});const re=function(o){return[o]};function Yt(o,i){if(1&o&&e._UZ(0,"chips-faam",23),2&o){const t=e.oxw().$implicit;e.Q6J("color","blue")("label",e.VKq(2,re,null==t||null==t.status?null:t.status.name))}}function Bt(o,i){if(1&o&&e._UZ(0,"chips-faam",23),2&o){const t=e.oxw().$implicit;e.Q6J("color","red")("label",e.VKq(2,re,null==t||null==t.status?null:t.status.name))}}function jt(o,i){if(1&o&&e._UZ(0,"chips-faam",23),2&o){const t=e.oxw().$implicit;e.Q6J("color","green")("label",e.VKq(2,re,null==t||null==t.status?null:t.status.name))}}function zt(o,i){if(1&o&&(e.TgZ(0,"td",21),e.YNc(1,Yt,1,4,"chips-faam",22),e.YNc(2,Bt,1,4,"chips-faam",22),e.YNc(3,jt,1,4,"chips-faam",22),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","Solicitado"==(null==t||null==t.status?null:t.status.name)),e.xp6(1),e.Q6J("ngIf","Cancelado"==(null==t||null==t.status?null:t.status.name)),e.xp6(1),e.Q6J("ngIf","Aceptado"==(null==t||null==t.status?null:t.status.name))}}function $t(o,i){1&o&&(e.TgZ(0,"th",20),e._uU(1," Gestionar "),e.qZA())}function Gt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",21)(1,"div",24),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.gestioinaryProduct(l.id))}),e._uU(2," Gestionar "),e.qZA()()}}function Vt(o,i){1&o&&e._UZ(0,"tr",25)}function Ht(o,i){1&o&&e._UZ(0,"tr",26)}const Kt=function(){return[5,10,20]},Xt=[];class B{constructor(i,t,n,r){this.service=i,this.activatedRoute=t,this.router=n,this.dialog=r,this.displayedColumns=["id","movementDateRequest","noteRequest","warehouseOriginId","userRequestId","status","isActive","gestionary"],this.dataSource=new a.by(Xt),this.id=0,this.listWarehouse=[],this.columns=[],this.actions=[],this.id=parseInt(this.activatedRoute.snapshot.params.id),this.id>0&&this.readData()}applyFilter(i){i=(i=i.trim()).toLowerCase(),this.dataSource.filter=i}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.readData(),this.columns=[{prop:"Id",value:"id"},{prop:"Nombre",value:"name"},{prop:"Descripci\xf3n",value:"Description"},{prop:"Ubicaci\xf3n",value:"ubication"}],this.actions=["Ver","Editar","Eliminar"]}readData(){this.service.getListMovementRequest(this.id).subscribe(i=>{this.dataSource=i})}createNew(){this.router.navigate(["warehouse/warehouse/store"])}gestioinaryProduct(i){this.dialog.open(N,{data:{id:i},width:"80vw",maxWidth:"550px"}).afterClosed().subscribe(n=>{n&&this.readData()})}update(i){this.router.navigate(["warehouse/warehouse/store/"+i.id])}overView(i){this.dialog.open(Y,{data:{id:i.id},width:"80vw",maxWidth:"600px"}).afterClosed().subscribe(n=>{})}lowWarehouse(i){m().fire({title:"Seguro que quiere dar de baja?",text:"Recuerda que no estas eliminando permanentemente!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, dar de Baja!"}).then(t=>{t.isConfirmed&&this.service.lowWarehouseById(i.id).subscribe(n=>{this.readData(),m().fire("Baja Exitosa!","Su Almacen se dio de baja exitosamente.","success")})})}}B.\u0275fac=function(i){return new(i||B)(e.Y36(x.l),e.Y36(g.gz),e.Y36(g.F0),e.Y36(u.uw))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-warehouse-transfer"]],viewQuery:function(i,t){if(1&i&&e.Gf(f.NW,5),2&i){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},decls:40,vars:5,consts:[[1,"contenido"],[1,"w-full","mt-4"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],[1,"flex","items-center","justify-between","dark:bg-gray-700"],[1,"mat-elevation-z0","table-responsive"],["mat-table","",1,"table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","movementDateRequest"],["matColumnDef","noteRequest"],["matColumnDef","warehouseOriginId"],["matColumnDef","userRequestId"],["matColumnDef","isActive"],["matColumnDef","status"],["matColumnDef","gestionary"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[3,"color","label",4,"ngIf"],[3,"color","label"],[1,"flex","items-center","justify-center","p-1","pl-2","pr-2",2,"border-radius","4px","background","#0f172a","width","fit-content","color","aliceblue",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Solicitudes Pendientes 1"),e.qZA(),e.TgZ(4,"div",3),e._uU(5,"Movimientos de Productos Soliciados"),e.qZA()(),e._UZ(6,"br"),e.TgZ(7,"div",4),e._UZ(8,"div")(9,"div"),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"div",5)(12,"table",6),e.ynx(13,7),e.YNc(14,It,2,0,"th",8),e.YNc(15,kt,2,1,"td",9),e.BQk(),e.ynx(16,10),e.YNc(17,Mt,2,0,"th",8),e.YNc(18,Pt,3,3,"td",9),e.BQk(),e.ynx(19,11),e.YNc(20,St,2,0,"th",8),e.YNc(21,Ot,2,1,"td",9),e.BQk(),e.ynx(22,12),e.YNc(23,Jt,2,0,"th",8),e.YNc(24,Nt,2,1,"td",9),e.BQk(),e.ynx(25,13),e.YNc(26,Ft,2,0,"th",8),e.YNc(27,Qt,2,1,"td",9),e.BQk(),e.ynx(28,14),e.YNc(29,Lt,2,0,"th",8),e.YNc(30,Dt,3,2,"td",9),e.BQk(),e.ynx(31,15),e.YNc(32,Et,2,0,"th",8),e.YNc(33,zt,4,3,"td",9),e.BQk(),e.ynx(34,16),e.YNc(35,$t,2,0,"th",8),e.YNc(36,Gt,3,0,"td",9),e.BQk(),e.YNc(37,Vt,1,0,"tr",17),e.YNc(38,Ht,1,0,"tr",18),e.qZA(),e._UZ(39,"mat-paginator",19),e.qZA()()),2&i&&(e.xp6(12),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(4,Kt)))},dependencies:[p.O5,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,f.NW,le.i,oe.L],styles:[".contenido[_ngcontent-%COMP%]{width:100%;padding:20px;margin:8px;border-radius:5px;background:#fff;transition:all .3s ease-in-out;box-shadow:0 0 25px #0000001a}"]});var ei=s(6771),ti=s(6034),ii=s(8675),oi=s(4004),ni=s(4719),ai=s(6234),ge=s(7957),L=s(9602);function ri(o,i){if(1&o&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.AsE(" ",t.firstName," ",t.lastName," ")}}function si(o,i){if(1&o&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}class j{constructor(i,t,n,r,l){this.fb=i,this.pipeDate=t,this.serviceClient=n,this.serviceWarehouse=r,this.serviceSale=l,this.listWarehouse=[],this.listSaleStatus=[],this.options=[],this.change=new e.vpe,this.form=this.fb.group({myControl:[null],clientId:[1],name:[null],warehouseId:[null],typeId:[null],dateInit:[null],dateEnd:[null]}),this.filteredOptions=this.form.get("myControl").valueChanges.pipe((0,ii.O)(""),(0,oi.U)(c=>this._filter(c||""))),this.setListWarehouse(),this.setListStatus(),this.setClient()}control(i){return this.form.controls[i]}setListWarehouse(){this.serviceWarehouse.getAllWarehouse().subscribe(i=>{this.listWarehouse=i})}setListStatus(){this.serviceSale.getSaleStatus().subscribe(i=>{this.listSaleStatus=i})}setClient(){this.serviceClient.getAllClient().subscribe(i=>{this.options=i})}_filter(i){const t=(i=i?.firstName?i?.firstName:i).toLowerCase();return this.options.filter(n=>n.firstName.toLowerCase().includes(t))}onSelectionChange(i){this.form.get("myControl").setValue(i?.option?.value?.firstName+" "+i?.option?.value?.lastName),this.form.get("clientId").setValue(i?.option?.value?.id)}save(){const i=this.form.value;let t="&";null!=i.dateInit&&null!=i.dateEnd&&(t="&DateInit="+this.pipeDate.transform(i.dateInit,"YYYY-MM-dd"),t+="&DateEnd="+this.pipeDate.transform(i.dateEnd,"YYYY-MM-dd")),null!=i.warehouseId&&(t+=(t.length>1?"&":"")+"WarehouseId="+i.warehouseId),null!=i.typeId&&(t+=(t.length>1?"&":"")+"TypeId="+i.typeId),null!=i.name&&(t+=(t.length>1?"&":"")+"Name="+i.name),null!=i.clientId&&(t+=(t.length>1?"&":"")+"ClientId="+i.clientId),this.change.emit(t)}clean(){this.form.get("name").setValue(null),this.form.get("warehouseId").setValue(null),this.form.get("typeId").setValue(null),this.form.get("dateInit").setValue(null),this.form.get("dateEnd").setValue(null),this.form.get("clientId").setValue(null),this.form.get("myControl").setValue(null),this.change.emit("")}}function li(o,i){1&o&&(e.TgZ(0,"th",22),e._uU(1," Cod "),e.qZA())}function ci(o,i){if(1&o&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.id," ")}}function ui(o,i){1&o&&(e.TgZ(0,"th",22),e._uU(1," Tipo "),e.qZA())}function di(o,i){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t||null==t.movementType?null:t.movementType.name," ")}}function mi(o,i){if(1&o&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t||null==t.movementType?null:t.movementType.name," ")}}function pi(o,i){if(1&o&&(e.TgZ(0,"td",23),e.YNc(1,di,2,1,"div",24),e.YNc(2,mi,2,1,"div",25),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",1===t.movementType.id),e.xp6(1),e.Q6J("ngIf",2===t.movementType.id)}}function hi(o,i){1&o&&(e.TgZ(0,"th",22),e._uU(1," Motivo "),e.qZA())}function gi(o,i){if(1&o&&(e.TgZ(0,"td",23)(1,"div",28),e._uU(2),e.qZA()()),2&o){const t=i.$implicit;e.xp6(2),e.hij(" ",null==t||null==t.movementMotive?null:t.movementMotive.name," ")}}function fi(o,i){1&o&&(e.TgZ(0,"th",22),e._uU(1," Producto "),e.qZA())}function _i(o,i){if(1&o&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.product.name," ")}}function vi(o,i){1&o&&(e.TgZ(0,"th",22),e._uU(1," Monto "),e.qZA())}function bi(o,i){if(1&o&&(e.TgZ(0,"td",23),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.amountOrigin,"1.2-2")," ")}}function xi(o,i){1&o&&(e.TgZ(0,"th",22),e._uU(1," Monto "),e.qZA())}function Zi(o,i){if(1&o&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t||null==t.unitMeasurement?null:t.unitMeasurement.name," ")}}function Ci(o,i){1&o&&(e.TgZ(0,"th",22),e._uU(1," Tipo de Venta "),e.qZA())}function Ti(o,i){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t||null==t.saleType?null:t.saleType.name," ")}}function wi(o,i){if(1&o&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t||null==t.saleType?null:t.saleType.name," ")}}function yi(o,i){if(1&o&&(e.TgZ(0,"td",23),e.YNc(1,Ti,2,1,"div",24),e.YNc(2,wi,2,1,"div",25),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",1===t.saleType.id),e.xp6(1),e.Q6J("ngIf",2===t.saleType.id)}}function Ai(o,i){1&o&&(e.TgZ(0,"th",22),e._uU(1," Acciones "),e.qZA())}function Ui(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",23)(1,"mat-icon",29),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.overView(l))}),e._uU(2,"visibility"),e.qZA()()}}function qi(o,i){1&o&&e._UZ(0,"tr",30)}function Ii(o,i){1&o&&e._UZ(0,"tr",31)}j.\u0275fac=function(i){return new(i||j)(e.Y36(d.qu),e.Y36(ae.E),e.Y36(ni.y),e.Y36(x.l),e.Y36(ai.F))},j.\u0275cmp=e.Xpm({type:j,selectors:[["movement-filter"]],outputs:{change:"emitQuery"},decls:58,vars:26,consts:[["ngNativeValidate","","autocomplete","off",3,"formGroup"],[1,"grid","grid-cols-2","xs:grid-cols-2","sm:grid-cols-12","w-full","min-w-0"],[1,"col-span-2","sm:col-span-6"],[1,"flex","flex-col","flex-auto"],["appearance","fill",1,"w-full","pr-3"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["type","text","placeholder","Nombre Cliente..","aria-label","Number","matInput","",1,"w-full",3,"formControl","matAutocomplete"],["autoActiveFirstOption","","required","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-1","sm:col-span-3"],[1,"w-full","pr-3"],[3,"formControl"],["value","1"],["value","2"],["color","accent",1,"w-full","pr-3"],["matInput","",3,"formControl","matDatepicker"],["matIconSuffix","",3,"for"],["picker1",""],["color","primary"],["picker2",""],[1,"col-span-2","mt-6","mb-3","sm:col-span-6","sm:mt-6","sm:mt-0"],[1,"flex","w-full","center-container"],[1,"px-6","ml-3",3,"color","label","icon","withFull","disabled","buttonClick"],[3,"value"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"mat-divider")(2,"br"),e.TgZ(3,"form",0)(4,"div",1)(5,"div",2)(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Cliente:"),e.qZA(),e._UZ(10,"mat-icon",5)(11,"input",6),e.TgZ(12,"mat-autocomplete",7,8),e.NdJ("optionSelected",function(r){return t.onSelectionChange(r)}),e.YNc(14,ri,2,3,"mat-option",9),e.ALo(15,"async"),e.qZA()()()(),e.TgZ(16,"div",10)(17,"div",3)(18,"mat-form-field",11)(19,"mat-label"),e._uU(20,"Almacen:"),e.qZA(),e.TgZ(21,"mat-select",12),e.YNc(22,si,2,2,"mat-option",9),e.qZA()()()(),e.TgZ(23,"div",10)(24,"div",3)(25,"mat-form-field",11)(26,"mat-label"),e._uU(27,"Tipo Venta"),e.qZA(),e.TgZ(28,"mat-select",12)(29,"mat-option",13),e._uU(30,"Contado"),e.qZA(),e.TgZ(31,"mat-option",14),e._uU(32,"Credito"),e.qZA()()()()()(),e.TgZ(33,"div",1)(34,"div",10)(35,"div",3)(36,"mat-form-field",15)(37,"mat-label"),e._uU(38,"Fecha Inicio:"),e.qZA(),e._UZ(39,"input",16)(40,"mat-datepicker-toggle",17)(41,"mat-datepicker",null,18),e.qZA()()(),e.TgZ(43,"div",10)(44,"div",3)(45,"mat-form-field",15)(46,"mat-label"),e._uU(47,"Fecha Fin:"),e.qZA(),e._UZ(48,"input",16)(49,"mat-datepicker-toggle",17)(50,"mat-datepicker",19,20),e.qZA()()(),e.TgZ(52,"div",21)(53,"div",3)(54,"div",22)(55,"btn-generic",23),e.NdJ("buttonClick",function(){return t.save()}),e.qZA(),e.TgZ(56,"btn-generic",23),e.NdJ("buttonClick",function(){return t.clean()}),e.qZA()()()()(),e._UZ(57,"mat-divider"),e.qZA()()),2&i){const n=e.MAs(13),r=e.MAs(42),l=e.MAs(51);e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:user-circle"),e.xp6(1),e.Q6J("formControl",t.control("myControl"))("matAutocomplete",n),e.xp6(3),e.Q6J("ngForOf",e.lcZ(15,24,t.filteredOptions)),e.xp6(7),e.Q6J("formControl",t.control("warehouseId")),e.xp6(1),e.Q6J("ngForOf",t.listWarehouse),e.xp6(6),e.Q6J("formControl",t.control("typeId")),e.xp6(11),e.Q6J("formControl",t.control("dateInit"))("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(8),e.Q6J("formControl",t.control("dateEnd"))("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(6),e.Q6J("color","green")("label","filtrar")("icon","filter_list")("withFull",!1)("disabled",!1),e.xp6(1),e.Q6J("color","secondary")("label","Limpiar")("icon","clear_all")("withFull",!1)("disabled",!1)}},dependencies:[p.sg,d.Fj,d.JJ,d.JL,C.Hw,d.oH,d.sg,v.KE,v.hX,v.qo,v.R9,P.Nt,O.gD,J.ey,w.d,ge.XC,ge.ZL,L.Mq,L.hl,L.nW,y.e,p.Ov],styles:[".center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]});const ki=[];class z{constructor(i,t,n,r,l){this.service=i,this.router=t,this.dialog=n,this.servicePettyCash=r,this.activatedRoute=l,this.displayedColumns=["id","movementType","movementMotive","product","amountOrigin","unitMeasurement","acciones"],this.dataSource=new a.by(ki),this.MyData=[],this.screenWidth=0,this.isPhone=!1,this.columns2=[{label:"Cod",property:"id"},{label:"Nombre",property:"Name"}],this.actions2=[{label:"Cod",property:"id"},{label:"Nombre",property:"Name"}],this.listOptionsPage=[5,10,20,50,100],this.totalLength=400,this.page=0,this.limit=10,this.queryFilter="",this.objComplete=null,this.listWarehouse=[],this.columns=[],this.actions=[]}applyFilter(i){i=(i=i.trim()).toLowerCase(),this.dataSource.filter=i}ngAfterViewInit(){}ngOnInit(){this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.getWarehouseMovementByWarehouseId(this.warehouseId,this.CurrentPaginator).subscribe(i=>{this.dataSource.data=i.listWarehouseProductMovement,this.MyData=i.listWarehouseProductMovement,this.objComplete=i,this.totalLength=i.total}),this.columns=[{prop:"Id",value:"id"},{prop:"Nombre",value:"name"},{prop:"Descripci\xf3n",value:"Description"},{prop:"Ubicaci\xf3n",value:"ubication"}],this.actions=["Ver","Editar","Eliminar"]}senfilter(i){this.resetPaginator(),this.queryFilter=i}resetPaginator(){this.page=0,this.limit=10}pageEvent(i){this.limit=i.pageSize,this.page=i.pageIndex}get CurrentPaginator(){return`?Limit=${this.limit}&Page=${this.page}`}createNew(){this.router.navigate(["sale/sale/store"])}update(i){this.router.navigate(["sale/sale/store/"+i.id])}overView(i){this.dialog.open(ei.K,{panelClass:"custom-container",maxHeight:"94vh",data:{id:i.id}}).afterClosed().subscribe(n=>{})}lowWarehouse(i){m().fire({title:"Seguro que quiere dar de baja?",text:"Recuerda que no estas eliminando permanentemente!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, dar de Baja!"}).then(t=>{t.isConfirmed&&m().fire("Baja Exitosa!","Su Almacen se dio de baja exitosamente.","success")})}}function Mi(o,i){if(1&o&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}z.\u0275fac=function(i){return new(i||z)(e.Y36(x.l),e.Y36(g.F0),e.Y36(u.uw),e.Y36(ti.$),e.Y36(g.gz))},z.\u0275cmp=e.Xpm({type:z,selectors:[["app-warehouse-movement"]],viewQuery:function(i,t){if(1&i&&e.Gf(f.NW,5),2&i){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first)}},decls:42,vars:7,consts:[[1,"contenido"],[1,"flex","items-center","justify-between","dark:bg-gray-700"],[1,"w-full","mt-4"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],[3,"emitQuery"],[1,"div"],[1,"mat-elevation-z0","table-responsive"],["mat-table","",1,"table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","movementType"],["matColumnDef","movementMotive"],["matColumnDef","product"],["matColumnDef","amountOrigin"],["matColumnDef","unitMeasurement"],["matColumnDef","saleType"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length","pageIndex","pageSize","page"],["mat-header-cell",""],["mat-cell",""],["class","py-0.4 h-6 w-22 px-1 rounded-full text-xs text-center font-semibold text-green-800 bg-green-100 dark:text-green-50 dark:bg-green-500",4,"ngIf"],["class","py-0.4 h-6 w-22 px-1 rounded-full text-xs text-center font-semibold text-orange-800 bg-orange-100 dark:text-orange-50 dark:bg-orange-500",4,"ngIf"],[1,"py-0.4","h-6","w-22","px-1","rounded-full","text-xs","text-center","font-semibold","text-green-800","bg-green-100","dark:text-green-50","dark:bg-green-500"],[1,"py-0.4","h-6","w-22","px-1","rounded-full","text-xs","text-center","font-semibold","text-orange-800","bg-orange-100","dark:text-orange-50","dark:bg-orange-500"],[1,"py-0.4","h-6","w-22","px-1","rounded-full","text-xs","text-center","font-semibold","text-blue-800","bg-blue-100","dark:text-blue-50","dark:bg-blue-500"],[1,"mr-2",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Listado de Movimientos"),e.qZA(),e.TgZ(5,"div",4),e._uU(6,"Modulo de movimientos"),e.qZA()(),e._UZ(7,"div"),e.qZA(),e.TgZ(8,"div")(9,"movement-filter",5),e.NdJ("emitQuery",function(r){return t.senfilter(r)}),e.qZA()(),e._UZ(10,"br")(11,"br"),e.TgZ(12,"div",6)(13,"div",7)(14,"table",8),e.ynx(15,9),e.YNc(16,li,2,0,"th",10),e.YNc(17,ci,2,1,"td",11),e.BQk(),e.ynx(18,12),e.YNc(19,ui,2,0,"th",10),e.YNc(20,pi,3,2,"td",11),e.BQk(),e.ynx(21,13),e.YNc(22,hi,2,0,"th",10),e.YNc(23,gi,3,1,"td",11),e.BQk(),e.ynx(24,14),e.YNc(25,fi,2,0,"th",10),e.YNc(26,_i,2,1,"td",11),e.BQk(),e.ynx(27,15),e.YNc(28,vi,2,0,"th",10),e.YNc(29,bi,3,4,"td",11),e.BQk(),e.ynx(30,16),e.YNc(31,xi,2,0,"th",10),e.YNc(32,Zi,2,1,"td",11),e.BQk(),e.ynx(33,17),e.YNc(34,Ci,2,0,"th",10),e.YNc(35,yi,3,2,"td",11),e.BQk(),e.ynx(36,18),e.YNc(37,Ai,2,0,"th",10),e.YNc(38,Ui,3,0,"td",11),e.BQk(),e.YNc(39,qi,1,0,"tr",19),e.YNc(40,Ii,1,0,"tr",20),e.qZA(),e.TgZ(41,"mat-paginator",21),e.NdJ("page",function(r){return t.pageEvent(r)}),e.qZA()()()()),2&i&&(e.xp6(14),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",t.listOptionsPage)("length",t.totalLength)("pageIndex",t.page)("pageSize",t.limit))},dependencies:[p.O5,C.Hw,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,f.NW,j,p.JJ],styles:['@charset "UTF-8";.contenido[_ngcontent-%COMP%]{width:100%;padding:20px;margin:8px;border-radius:5px;background:#fff;transition:all .3s ease-in-out;box-shadow:0 0 25px #0000001a}.center-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly}.small-button[_ngcontent-%COMP%]{padding:2px 4px;font-size:12px;min-width:36px}.small-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}@media only screen and (max-width: 599px){.hide-on-small-screen[_ngcontent-%COMP%]{display:none}}@media only screen and (min-width: 600px){.show-on-small-screen[_ngcontent-%COMP%]{display:none}}']});class ${constructor(i,t,n){this.fb=i,this.pipeDate=t,this.service=n,this.listCategory=[],this.change=new e.vpe,this.form=this.fb.group({name:[null],categoryId:[null],dateInit:[null],dateEnd:[null],moreFew:[!1]}),this.setListCategory()}setListCategory(){this.service.getAllProductCategory().subscribe(i=>{this.listCategory=i})}control(i){return this.form.controls[i]}save(){const i=this.form.value;i.moreFew=i.moreFew?i.moreFew:null;let t="&";null!=i.name&&(t+=(t.length>1?"&":"")+"Name="+i.name),null!=i.categoryId&&(t+=(t.length>1?"&":"")+"CategoryId="+i.categoryId),null!=i.moreFew&&(t+=(t.length>1?"&":"")+"ButFew="+i.moreFew),null!=i.dateInit&&null!=i.dateEnd&&(t+="&DateInit="+this.pipeDate.transform(i.dateInit,"YYYY-MM-dd"),t+="&DateEnd="+this.pipeDate.transform(i.dateEnd,"YYYY-MM-dd")),this.change.emit(t)}clean(){this.form.get("name").setValue(null),this.form.get("categoryId").setValue(null),this.form.get("moreFew").setValue(null),this.form.get("dateInit").setValue(null),this.form.get("dateEnd").setValue(null),this.change.emit("")}}function Pi(o,i){1&o&&(e.TgZ(0,"mat-icon",27),e._uU(1,"warning"),e.qZA())}function Si(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectProduct(l))}),e.TgZ(1,"div",17)(2,"div",18)(3,"div")(4,"div",19),e._uU(5),e.ALo(6,"number"),e.qZA(),e.TgZ(7,"div",20),e._uU(8),e.qZA()(),e.TgZ(9,"div"),e.YNc(10,Pi,2,0,"mat-icon",21),e.qZA()()(),e._UZ(11,"img",22),e.TgZ(12,"div",23)(13,"div",24),e._uU(14),e.ALo(15,"truncate"),e.qZA(),e.TgZ(16,"div",25),e._uU(17),e.ALo(18,"truncate"),e.qZA()(),e._UZ(19,"div",26),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw();e.xp6(5),e.hij(" Cantidad : ",e.xi3(6,6,null==t?null:t.amount,"1.0-2")," "),e.xp6(3),e.hij(" ",null==t||null==t.unitMeasurement?null:t.unitMeasurement.name," "),e.xp6(2),e.Q6J("ngIf",(null==t?null:t.amount)<=5),e.xp6(1),e.Q6J("src",null!=t.product&&t.product.picture?"data:image/png;base64,"+t.product.picture:n.imageSource,e.LSH),e.xp6(3),e.Oqu(e.xi3(15,9,null==t||null==t.product?null:t.product.name,40)),e.xp6(3),e.Oqu(e.xi3(18,12,null==t||null==t.product?null:t.product.description,40))}}$.\u0275fac=function(i){return new(i||$)(e.Y36(d.qu),e.Y36(ae.E),e.Y36(pe.e))},$.\u0275cmp=e.Xpm({type:$,selectors:[["warehouse-product-report-filter"]],outputs:{change:"emitQuery"},decls:48,vars:22,consts:[["ngNativeValidate","","autocomplete","off",3,"formGroup"],[1,"grid","grid-cols-2","xs:grid-cols-2","sm:grid-cols-12","w-full","min-w-0"],[1,"col-span-2","sm:col-span-4"],[1,"flex","flex-col","flex-auto"],["appearance","fill",1,"w-full","pr-3"],["matInput","","placeholder","Buscar por nombre..","value","Buscar por Nombre..",3,"formControl"],[1,"col-span-1","sm:col-span-4"],[1,"w-full","pr-3"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-1","sm:col-span-4","flex","flex-col","items-center"],[1,"mb-4"],[1,"flex","justify-center","w-full"],[1,"mr-3",3,"color","formControl"],[1,"col-span-1","sm:col-span-3"],["color","accent",1,"w-full","pr-3"],["matInput","",3,"formControl","matDatepicker"],["matIconSuffix","",3,"for"],["picker1",""],["color","primary"],["picker2",""],[1,"col-span-2","mt-6","mb-3","sm:col-span-6","sm:mt-6","sm:mt-0"],[1,"flex","w-full","center-container"],[1,"px-6","ml-3",3,"color","label","icon","withFull","disabled","buttonClick"],[3,"value"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"mat-divider")(2,"br"),e.TgZ(3,"form",0)(4,"div",1)(5,"div",2)(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"input",5),e.qZA()()(),e.TgZ(11,"div",6)(12,"div",3)(13,"mat-form-field",7)(14,"mat-label"),e._uU(15,"Categoria:"),e.qZA(),e.TgZ(16,"mat-select",8),e.YNc(17,Mi,2,2,"mat-option",9),e.qZA()()()(),e.TgZ(18,"div",10)(19,"mat-label",11),e._uU(20,"Producto con Caducidad:"),e.qZA(),e.TgZ(21,"div",12),e._UZ(22,"mat-slide-toggle",13),e.qZA()()(),e.TgZ(23,"div",1)(24,"div",14)(25,"div",3)(26,"mat-form-field",15)(27,"mat-label"),e._uU(28,"Fecha Caducidad Inicio:"),e.qZA(),e._UZ(29,"input",16)(30,"mat-datepicker-toggle",17)(31,"mat-datepicker",null,18),e.qZA()()(),e.TgZ(33,"div",14)(34,"div",3)(35,"mat-form-field",15)(36,"mat-label"),e._uU(37,"Fecha Caducidad Fin:"),e.qZA(),e._UZ(38,"input",16)(39,"mat-datepicker-toggle",17)(40,"mat-datepicker",19,20),e.qZA()()(),e.TgZ(42,"div",21)(43,"div",3)(44,"div",22)(45,"btn-generic",23),e.NdJ("buttonClick",function(){return t.save()}),e.qZA(),e.TgZ(46,"btn-generic",23),e.NdJ("buttonClick",function(){return t.clean()}),e.qZA()()()()(),e._UZ(47,"mat-divider"),e.qZA()()),2&i){const n=e.MAs(32),r=e.MAs(41);e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("formControl",t.control("name")),e.xp6(6),e.Q6J("formControl",t.control("categoryId")),e.xp6(1),e.Q6J("ngForOf",t.listCategory),e.xp6(5),e.Q6J("color","primary")("formControl",t.control("moreFew")),e.xp6(7),e.Q6J("formControl",t.control("dateInit"))("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(8),e.Q6J("formControl",t.control("dateEnd"))("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(6),e.Q6J("color","green")("label","filtrar")("icon","filter_list")("withFull",!1)("disabled",!1),e.xp6(1),e.Q6J("color","secondary")("label","Limpiar")("icon","clear_all")("withFull",!1)("disabled",!1)}},dependencies:[p.sg,d.Fj,d.JJ,d.JL,d.oH,d.sg,v.KE,v.hX,v.R9,P.Nt,O.gD,J.ey,w.d,L.Mq,L.hl,L.nW,he.Rr,y.e]});class G{constructor(i,t,n,r,l,c){this.service=i,this.activatedRoute=t,this.dialog=n,this.sanitizer=r,this.router=l,this.fb=c,this.myControl=new d.NI(""),this.imageSource=this.sanitizer.bypassSecurityTrustResourceUrl(_.B),this.options=[],this.totalDinner=0,this.productListSelect=[],this.filter={name:""},this.queryFilter="",this.page=0,this.limit=18,this.listOptionsPage=[5,10,20,50,100,500,1e3],this.objComplete=null,this.totalLength=400,this.filter2={name:""},this.form=this.fb.group({id:[null],price:[null],count:[null],discount:[null],subTotal:[null],search:[""]})}ngOnInit(){this.imageSource=this.sanitizer.bypassSecurityTrustResourceUrl(_.B),this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.getProductByWarehouseId(this.warehouseId,this.CurrentPaginator).subscribe(i=>{this.productList=i.listProducts,this.objComplete=i,this.totalLength=i.total,this.productList.map(t=>{null===t?.product?.picture&&(t.product.picture=te.k)})})}get CurrentPaginator(){return`?Limit=${this.limit}&Page=${this.page}`}pageEvent(i){this.limit=i.pageSize,this.page=i.pageIndex,this.service.getProductByWarehouseId(this.warehouseId,this.CurrentPaginator+this.queryFilter).subscribe(t=>{this.productList=t.listProducts,this.objComplete=t,this.totalLength=t.total})}senfilter(i){this.limit=18,this.page=0,this.queryString=this.CurrentPaginator+i,this.service.getProductByWarehouseId(this.warehouseId,this.queryString).subscribe(t=>{this.productList=t.listProducts,this.objComplete=t,this.totalLength=t.total,this.queryFilter=i})}selectProduct(i){this.validateSelectProduct(i.id).length>0?m().fire({icon:"error",title:"Oops...",text:"Ya existe este producto en la lista!"}):this.dialog.open(M,{data:{data:i,isNew:true},maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(l=>{let c=l;c?.price&&c.count&&c?.subTotal&&(this.productList.map(Z=>{Z.id==i.id&&(Z.check=!0)}),this.changeProductList(c,true))})}changeProductList(i,t){this.validateSelectProduct(i.id).length>0&&t?m().fire({icon:"error",title:"Oops...",text:"Ya existe este producto en la lista!"}):t?(this.productListSelect.push(i),this.reloadValueTotal()):(this.productListSelect.map(r=>{r.id==i.id&&(r.count=i.count,r.discount=i.discount,r.price=i.price,r.subTotal=i.subTotal)}),this.reloadValueTotal())}reloadValueTotal(){let i=0;this.productListSelect.map(t=>{i+=t.subTotal}),this.totalDinner=i,this.form.get("search").setValue("")}updateSelect(i){this.dialog.open(ee.N,{data:{data:i,isNew:!1}}).afterClosed().subscribe(r=>{let l=r;this.productList.map(c=>{c.id==i.id&&(c.check=!0)}),this.changeProductList(l,!1)})}validateSelectProduct(i){return this.productListSelect.filter(t=>t.id==i)}_filter(i){const t=i.toLowerCase();return this.options.filter(n=>n.firstName.toLowerCase().includes(t))}get busqueda(){return{name:this.form.get("search").value,description:this.form.get("search").value}}getByFilterLocal(i){this.filter2=i}removeItem(i){m().fire({title:"Seguro que quiere quitar?",text:"Una ves quitado, no se revertira!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar!"}).then(t=>{t.isConfirmed&&(this.productListSelect=this.productListSelect.filter(n=>n.id!==i.id),this.productList.map(n=>{n.id==i.id&&(n.check=!1)}),this.reloadValueTotal(),m().fire("Eliminado!","Ese producto no pertenece a la lista de tu compra","success"))})}cancelStore(){m().fire({title:"Seguro que quiere cancelar?",text:"Una cancelado ya se perder\xe1 lo seleccionado!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, Cancelar!"}).then(i=>{i.isConfirmed&&(this.reloadValueTotal(),m().fire("Cancelado!","La nota de venta ah sido cancelada!","success"),this.router.navigate(["sale"]))})}gestionaryTransfer(){null!=this.queryString?(this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.generateReportingExcelProductById(this.warehouseId,this.queryString).subscribe(i=>{const t=URL.createObjectURL(i);window.open(t,"_blank"),setTimeout(()=>{URL.revokeObjectURL(t)},100)},i=>{console.error("Error al descargar el Excel:",i)})):(this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.generateReportingExcelProductById(this.warehouseId,this.CurrentPaginator).subscribe(i=>{const t=URL.createObjectURL(i);window.open(t,"_blank"),setTimeout(()=>{URL.revokeObjectURL(t)},100)},i=>{console.error("Error al descargar el Excel:",i)}))}previewStore(){this.dialog.open(ie.l,{autoFocus:!1,maxHeight:"90vh",data:{detailProduct:this.productListSelect,total:this.totalDinner,form:this.form.value}}).afterClosed().subscribe(n=>{})}}G.\u0275fac=function(i){return new(i||G)(e.Y36(x.l),e.Y36(g.gz),e.Y36(u.uw),e.Y36(b.H7),e.Y36(g.F0),e.Y36(d.qu))},G.\u0275cmp=e.Xpm({type:G,selectors:[["app-warehouse-product-report"]],decls:32,vars:11,consts:[[1,"base-content"],[1,"contenido"],[1,"grid","grid-cols-1","sm:grid-cols-12","w-full","h-full","min-w-0"],[1,"sm:col-span-12","lg:col-span-12",2,"overflow","hidden"],[1,"w-full","pl-2","pr-2",2,"height","90px"],[1,"flex","items-center","justify-between","-mx-8","px-8","py-5","dark:bg-gray-700"],[1,"w-full"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],[2,"display","flex"],[1,"mr-2",3,"color","label","icon","withFull","disabled","buttonClick"],[3,"emitQuery"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length","pageIndex","pageSize","page"],["itemSize","100",1,"example-viewport","h-full"],[1,"grid","grid-cols-1","sm:grid-cols-12","w-full","min-w-0"],["class","sm:col-span-6 xs:col-span-12  md:col-span-3   lg:col-span-2\n                                     flex flex-col flex-auto p-0 bg-card shadow rounded overflow-hidden p-1 m-1","style","background: #fff !important;",3,"click",4,"ngFor","ngForOf"],[1,"sm:col-span-6","xs:col-span-12","md:col-span-3","lg:col-span-2","flex","flex-col","flex-auto","p-0","bg-card","shadow","rounded","overflow-hidden","p-1","m-1",2,"background","#fff !important",3,"click"],[1,"p-2"],[1,"flex","justify-between"],[1,"py-0.5","px-3","rounded-full","text-sm","font-semibold","text-blue-800","bg-blue-100","dark:text-blue-50","dark:bg-blue-500"],[1,"py-0.5","px-3","mt-1","rounded-full","w-min","text-sm","font-semibold","text-orange-800","bg-orange-100","dark:text-orange-50","dark:bg-orange-500"],["style","height: 15px; color: #F5B041;",4,"ngIf"],[2,"max-width","230px","max-height","230px",3,"src"],[1,"text-center","mt-1","mb-1","h-full"],[1,"product-name"],[1,"product-description"],[1,"text-center",2,"background","#D5D8DC"],[2,"height","15px","color","#F5B041"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div")(7,"div",6)(8,"div",7),e._uU(9,"Listado de productos"),e.qZA(),e.TgZ(10,"div",8),e._uU(11),e.qZA()()(),e.TgZ(12,"div",9)(13,"btn-actions",10),e.NdJ("buttonClick",function(){return t.gestionaryTransfer()}),e.qZA()()()(),e.TgZ(14,"warehouse-product-report-filter",11),e.NdJ("emitQuery",function(r){return t.senfilter(r)}),e.qZA(),e._UZ(15,"mat-divider"),e.TgZ(16,"mat-paginator",12),e.NdJ("page",function(r){return t.pageEvent(r)}),e.qZA(),e._UZ(17,"mat-divider"),e.TgZ(18,"cdk-virtual-scroll-viewport",13)(19,"div",14),e.YNc(20,Si,20,15,"div",15),e.qZA(),e._UZ(21,"br")(22,"br")(23,"br")(24,"br")(25,"br")(26,"br")(27,"br")(28,"br")(29,"br")(30,"br")(31,"br"),e.qZA()()()()()),2&i&&(e.xp6(11),e.hij("Gestion de productos del almacen ",t.warehouseId,""),e.xp6(2),e.Q6J("color","green")("label","Exportar")("icon","cloud_download")("withFull",!0)("disabled",!1),e.xp6(3),e.Q6J("pageSizeOptions",t.listOptionsPage)("length",t.totalLength)("pageIndex",t.page)("pageSize",t.limit),e.xp6(4),e.Q6J("ngForOf",t.productList))},dependencies:[p.sg,p.O5,C.Hw,w.d,f.NW,I.N7,I.xd,K.P,$,p.JJ,X.W],styles:[".icon[_ngcontent-%COMP%]{margin:0 10px;color:#000;font-weight:900}.contenido[_ngcontent-%COMP%]{padding:10px;height:100%;border-radius:5px;background:#fff;transition:all .3s ease-in-out;box-shadow:0 0 25px #0000001a}.base-content[_ngcontent-%COMP%]{padding:8px;width:100%}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.itemSelect[_ngcontent-%COMP%]{border:1px solid #f4f4f4;border-radius:2px;padding:5px 10px;margin:2px}.datos[_ngcontent-%COMP%]{padding-left:10px}.itemSelect[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.example-viewport[_ngcontent-%COMP%]{width:100%!important}.product-name[_ngcontent-%COMP%]{font-size:13px;font-weight:700}.product-description[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}"]});var Oi=s(6088),Ji=s(6709);function Ni(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"filter-item",27),e.NdJ("emitQuery",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.senfilter(r))}),e.qZA()()}}function Fi(o,i){if(1&o&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"div")(4,"div",31),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"mat-checkbox",32),e._uU(8," Selecci\xf3nar "),e.qZA()()()(),e.TgZ(9,"div",21),e._UZ(10,"img",33),e.qZA(),e.TgZ(11,"div",34)(12,"div",35),e._uU(13),e.ALo(14,"truncate"),e.qZA(),e.TgZ(15,"div",36),e._uU(16),e.ALo(17,"truncate"),e.qZA()(),e._UZ(18,"div",37),e.qZA()),2&o){const t=i.$implicit,n=e.oxw();e.xp6(5),e.hij(" cod:",null==t?null:t.id," "),e.xp6(2),e.Q6J("color","primary"),e.xp6(3),e.Q6J("src",null!=t&&t.picture?"data:image/png;base64,"+(null==t?null:t.picture):n.imageSource,e.LSH),e.xp6(3),e.Oqu(e.xi3(14,5,null==t?null:t.name,40)),e.xp6(3),e.Oqu(e.xi3(17,8,null==t?null:t.description,40))}}function Qi(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"Cargando..."),e.qZA())}class V{constructor(i,t,n,r,l,c,Z){this.service=i,this.serviceShopping=t,this.activatedRoute=n,this.dialog=r,this.sanitizer=l,this.router=c,this.fb=Z,this.loading=!0,this.myControl=new d.NI(""),this.imageSource=this.sanitizer.bypassSecurityTrustResourceUrl(_.B),this.options=[],this.totalDinner=0,this.productList=[],this.productListSelect=[],this.filter={name:""},this.queryFilter="",this.limit=18,this.listOptionsPage=[5,10,20,50,100,500,1e3],this.objComplete=null,this.totalLength=400,this.isFilterVisible=!1,this.page=0,this.filter2={name:""},this.form=this.fb.group({id:[null],price:[null],count:[null],discount:[null],subTotal:[null],search:[""]})}ngOnInit(){this.imageSource=this.sanitizer.bypassSecurityTrustResourceUrl(_.B),this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.serviceShopping.getAllProductShopping(10,this.page).subscribe(i=>{this.productList=i,this.objComplete=i,this.totalLength=10,this.productList.map(t=>{null===t?.picture&&(t.product.picture=te.k)})}),this.loading=!1}get CurrentPaginator(){return`?Limit=${this.limit}&Page=${this.page}`}pageEvent(i){this.limit=i.pageSize,this.page=i.pageIndex,this.service.getProductByWarehouseId(this.warehouseId,this.CurrentPaginator+this.queryFilter).subscribe(t=>{this.productList=t.listProducts,this.objComplete=t,this.totalLength=t.total})}toggleFilter(){this.isFilterVisible=!this.isFilterVisible}addProductForWareouse(){this.router.navigate([`warehouse/warehouse/${this.warehouseId}/warehouse-adjustments`])}senfilter(i){this.limit=18,this.page=0,this.queryString=this.CurrentPaginator+i,this.service.getProductByWarehouseId(this.warehouseId,this.queryString).subscribe(t=>{this.productList=t.listProducts,this.objComplete=t,this.totalLength=t.total,this.queryFilter=i})}selectProduct(i){this.validateSelectProduct(i.id).length>0?m().fire({icon:"error",title:"Oops...",text:"Ya existe este producto en la lista!"}):this.dialog.open(M,{data:{data:i,isNew:true},maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(l=>{let c=l;c?.price&&c.count&&c?.subTotal&&(this.productList.map(Z=>{Z.id==i.id&&(Z.check=!0)}),this.changeProductList(c,true))})}changeProductList(i,t){this.validateSelectProduct(i.id).length>0&&t?m().fire({icon:"error",title:"Oops...",text:"Ya existe este producto en la lista!"}):t?(this.productListSelect.push(i),this.reloadValueTotal()):(this.productListSelect.map(r=>{r.id==i.id&&(r.count=i.count,r.discount=i.discount,r.price=i.price,r.subTotal=i.subTotal)}),this.reloadValueTotal())}reloadValueTotal(){let i=0;this.productListSelect.map(t=>{i+=t.subTotal}),this.totalDinner=i,this.form.get("search").setValue("")}updateSelect(i){this.dialog.open(ee.N,{data:{data:i,isNew:!1}}).afterClosed().subscribe(r=>{let l=r;this.productList.map(c=>{c.id==i.id&&(c.check=!0)}),this.changeProductList(l,!1)})}validateSelectProduct(i){return this.productListSelect.filter(t=>t.id==i)}_filter(i){const t=i.toLowerCase();return this.options.filter(n=>n.firstName.toLowerCase().includes(t))}get busqueda(){return{name:this.form.get("search").value,description:this.form.get("search").value}}getByFilterLocal(i){this.filter2=i}removeItem(i){m().fire({title:"Seguro que quiere quitar?",text:"Una ves quitado, no se revertira!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar!"}).then(t=>{t.isConfirmed&&(this.productListSelect=this.productListSelect.filter(n=>n.id!==i.id),this.productList.map(n=>{n.id==i.id&&(n.check=!1)}),this.reloadValueTotal(),m().fire("Eliminado!","Ese producto no pertenece a la lista de tu compra","success"))})}cancelStore(){m().fire({title:"Seguro que quiere cancelar?",text:"Una cancelado ya se perder\xe1 lo seleccionado!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, Cancelar!"}).then(i=>{i.isConfirmed&&(this.reloadValueTotal(),m().fire("Cancelado!","La nota de venta ah sido cancelada!","success"),this.router.navigate(["sale"]))})}gestionaryTransfer(){null!=this.queryString?(this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.generateReportingExcelProductById(this.warehouseId,this.queryString).subscribe(i=>{const t=URL.createObjectURL(i);window.open(t,"_blank"),setTimeout(()=>{URL.revokeObjectURL(t)},100)},i=>{console.error("Error al descargar el Excel:",i)})):(this.warehouseId=parseInt(this.activatedRoute.snapshot.params.id),this.service.generateReportingExcelProductById(this.warehouseId,this.CurrentPaginator).subscribe(i=>{const t=URL.createObjectURL(i);window.open(t,"_blank"),setTimeout(()=>{URL.revokeObjectURL(t)},100)},i=>{console.error("Error al descargar el Excel:",i)}))}gestionaryMovement(){this.router.navigate([`warehouse/warehouse/${this.warehouseId}/movement`])}previewStore(){this.dialog.open(ie.l,{autoFocus:!1,maxHeight:"90vh",data:{detailProduct:this.productListSelect,total:this.totalDinner,form:this.form.value}}).afterClosed().subscribe(n=>{})}loadProducts(){this.loading||(this.loading=!0,this.page++,this.serviceShopping.getAllProductShopping(30,this.page).subscribe(i=>{i&&i.length&&(this.productList=[...this.productList,...i]),this.loading=!1}))}onScroll(i){this.viewport.getRenderedRange().end===this.productList.length&&!this.loading&&this.loadProducts()}}V.\u0275fac=function(i){return new(i||V)(e.Y36(x.l),e.Y36(Oi.s),e.Y36(g.gz),e.Y36(u.uw),e.Y36(b.H7),e.Y36(g.F0),e.Y36(d.qu))},V.\u0275cmp=e.Xpm({type:V,selectors:[["app-warehouse-adjustments"]],viewQuery:function(i,t){if(1&i&&e.Gf(I.N7,5),2&i){let n;e.iGM(n=e.CRH())&&(t.viewport=n.first)}},decls:44,vars:20,consts:[[1,"base-content"],[1,"contenido"],[1,"grid","grid-cols-1","sm:grid-cols-12","w-full","h-full","min-w-0"],[1,"sm:col-span-12","lg:col-span-12",2,"overflow","hidden"],[1,"w-full","pl-2","pr-2"],[1,"grid","grid-cols-1","sm:grid-cols-12","gap-6","w-full","min-w-0"],[1,"sm:col-span-4","lg:col-span-3"],[1,"flex","flex-col","flex-auto"],[1,"w-full"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],[1,"sm:col-span-8","lg:col-span-9"],[1,"",2,"display","flex","justify-content","right","justify-content","right","align-items","flex-end"],[1,"flex","pb-2",2,"overflow-y","hidden"],[1,"w-full","sm:w-auto","mr-2",3,"color","label","icon","withFull","disabled","buttonClick"],[1,"flex","items-center","justify-between","mt-2",2,"color","#a2c747 !important"],[1,"flex","items-center",3,"click"],[2,"color","#a2c747 !important"],[1,"ml-2","font-bold","text-black",2,"color","#a2c747 !important"],[4,"ngIf"],[1,"mt-2"],[1,"flex","items-center","justify-center"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length","pageIndex","pageSize","page"],["itemSize","10",1,"example-viewport","h-full",3,"scrolledIndexChange"],[1,"grid","grid-cols-1","sm:grid-cols-12","w-full","h-full"],["class","sm:col-span-6 xs:col-span-12  md:col-span-3   lg:col-span-2\n                                     flex flex-col flex-auto p-0 bg-card shadow rounded overflow-hidden p-1 m-1","style","background: #fff !important;",4,"cdkVirtualFor","cdkVirtualForOf"],["class","loading-spinner",4,"ngIf"],[1,"mb-1","mt-1",3,"emitQuery"],[1,"sm:col-span-6","xs:col-span-12","md:col-span-3","lg:col-span-2","flex","flex-col","flex-auto","p-0","bg-card","shadow","rounded","overflow-hidden","p-1","m-1",2,"background","#fff !important"],[1,"p-2"],[1,"flex","justify-between"],[1,"ml-2",2,"font-weight","600","padding-right","10px"],[1,"-ml-2",3,"color"],[2,"max-width","170px","max-height","170px",3,"src"],[1,"text-center","mt-1","mb-1","h-full"],[1,"product-name"],[1,"product-description"],[1,"text-center",2,"background","#D5D8DC"],[1,"loading-spinner"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e._uU(10,"Listado de productos"),e.qZA(),e.TgZ(11,"div",10),e._uU(12),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"btn-actions",14),e.NdJ("buttonClick",function(){return t.addProductForWareouse()}),e.qZA(),e.TgZ(17,"btn-actions",14),e.NdJ("buttonClick",function(){return t.gestionaryTransfer()}),e.qZA()()()()()(),e.TgZ(18,"div",15)(19,"button",16),e.NdJ("click",function(){return t.toggleFilter()}),e.TgZ(20,"mat-icon",17),e._uU(21),e.qZA(),e.TgZ(22,"span",18),e._uU(23),e.qZA()()(),e.YNc(24,Ni,2,0,"div",19),e._UZ(25,"mat-divider",20),e.TgZ(26,"div",21)(27,"mat-paginator",22),e.NdJ("page",function(r){return t.pageEvent(r)}),e.qZA()(),e._UZ(28,"mat-divider"),e.TgZ(29,"cdk-virtual-scroll-viewport",23),e.NdJ("scrolledIndexChange",function(r){return t.onScroll(r)}),e.TgZ(30,"div",24),e.YNc(31,Fi,19,11,"div",25),e.YNc(32,Qi,2,0,"div",26),e.qZA(),e._UZ(33,"br")(34,"br")(35,"br")(36,"br")(37,"br")(38,"br")(39,"br")(40,"br")(41,"br")(42,"br")(43,"br"),e.qZA()()()()()),2&i&&(e.xp6(12),e.hij("Gestion de productos del almacen ",t.warehouseId,""),e.xp6(4),e.Q6J("color","orange")("label","Agregar Todos")("icon","check")("withFull",!0)("disabled",!1),e.xp6(1),e.Q6J("color","green")("label","Agregar Seleccionados")("icon","check")("withFull",!0)("disabled",!1),e.xp6(4),e.Oqu(t.isFilterVisible?"visibility_off":"visibility"),e.xp6(2),e.Oqu(t.isFilterVisible?"Ocultar filtros":"Mostrar filtros"),e.xp6(1),e.Q6J("ngIf",t.isFilterVisible),e.xp6(3),e.Q6J("pageSizeOptions",t.listOptionsPage)("length",t.totalLength)("pageIndex",t.page)("pageSize",t.limit),e.xp6(4),e.Q6J("cdkVirtualForOf",t.productList),e.xp6(1),e.Q6J("ngIf",t.loading))},dependencies:[p.O5,C.Hw,w.d,Ji.oG,f.NW,I.N7,I.xd,I.x0,K.P,F,X.W],styles:[".icon[_ngcontent-%COMP%]{margin:0 10px;color:#000;font-weight:900}.contenido[_ngcontent-%COMP%]{padding:10px;width:100%;height:100%;border-radius:5px;overflow-y:scroll;background:#ffffff;transition:all .3s ease-in-out;box-shadow:0 0 25px #0000001a}.base-content[_ngcontent-%COMP%]{padding:8px;width:100%}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.itemSelect[_ngcontent-%COMP%]{border:1px solid #f4f4f4;border-radius:2px;padding:5px 10px;margin:2px}.datos[_ngcontent-%COMP%]{padding-left:10px}.itemSelect[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.example-viewport[_ngcontent-%COMP%]{width:100%!important}.product-name[_ngcontent-%COMP%]{font-size:13px;font-weight:700}.product-description[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}"]});const Li=[{path:"",component:S},{path:"warehouse",component:S},{path:"warehouse/store/:id",component:Q},{path:"warehouse/store",component:Q},{path:"warehouse/product/:id",component:E},{path:"warehouse/warehouse-product-report/:id",component:G},{path:"warehouse/transfer/:id",component:B},{path:"warehouse/:id/movement",component:z},{path:"warehouse/:id/warehouse-adjustments",component:V}];class W{}W.\u0275fac=function(i){return new(i||W)},W.\u0275mod=e.oAB({type:W}),W.\u0275inj=e.cJS({providers:[x.l],imports:[p.ez,U.m,g.Bz.forChild(Li)]})},9836:(H,A,s)=>{s.d(A,{P:()=>u});var p=s(4650),g=s(6895),U=s(4859),f=s(7392);function a(_,e){if(1&_&&p._UZ(0,"mat-icon",2),2&_){const b=p.oxw();p.s9C("fontIcon",b.icon)}}const h=function(_,e,b,x,C){return{"btn-warning-faam":_,"btn-success-faam":e,"btn-secondary-faam":b,"btn-bad-faam":x,"btn-disabled-faam":C}};class u{set item1(e){this.color=e}set item2(e){this.label=e}set item3(e){this.icon=e}set item4(e){this.withFull=e}set item5(e){this.disabled=e}constructor(){this.color="green",this.label="value",this.icon=null,this.withFull=!1,this.disabled=!1,this.buttonClick=new p.vpe}handleClick(){this.disabled||this.buttonClick.emit()}}u.\u0275fac=function(e){return new(e||u)},u.\u0275cmp=p.Xpm({type:u,selectors:[["btn-actions"]],inputs:{item1:["color","item1"],item2:["label","item2"],item3:["icon","item3"],item4:["withFull","item4"],item5:["disabled","item5"]},outputs:{buttonClick:"buttonClick"},decls:3,vars:12,consts:[["mat-flat-button","","type","button",1,"btn-action",3,"ngClass","disabled","click"],["class","mr-2","icon","","aria-hidden","false","aria-label","Example share icon",3,"fontIcon",4,"ngIf"],["icon","","aria-hidden","false","aria-label","Example share icon",1,"mr-2",3,"fontIcon"]],template:function(e,b){1&e&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return b.handleClick()}),p._uU(1),p.YNc(2,a,1,1,"mat-icon",1),p.qZA()),2&e&&(p.ekj("w-full",!0===b.withFull),p.Q6J("ngClass",p.qbA(6,h,"orange"===b.color,"green"===b.color,"secondary"===b.color,"black"===b.color,b.disabled))("disabled",b.disabled),p.xp6(1),p.hij(" ",b.label," "),p.xp6(1),p.Q6J("ngIf",null!==b.icon))},dependencies:[g.mk,g.O5,U.lW,f.Hw],styles:[".btn-action[_ngcontent-%COMP%]{height:30px!important;min-height:30px!important;border-radius:10px!important;color:#fff!important;display:flex!important;cursor:pointer!important;padding-left:9px!important;padding-right:9px!important;box-shadow:0 4px 6px #0003}.btn-warning-faam[_ngcontent-%COMP%]{background:#F39C12!important}.btn-success-faam[_ngcontent-%COMP%]{background:var(--fuse-primary-600)!important}.btn-bad-faam[_ngcontent-%COMP%]{background:#1e293b!important}.btn-secondary-faam[_ngcontent-%COMP%]{background:#b4beca!important}.btn-disabled-faam[_ngcontent-%COMP%]{background:#D3D3D3!important;color:#1e293b!important;cursor:not-allowed}"]})}}]);